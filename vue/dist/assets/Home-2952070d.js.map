{"version":3,"file":"Home-2952070d.js","sources":["../../src/views/user/Home.vue"],"sourcesContent":["<template>\n  <div class=\"home-page\">\n    <!-- 主内容区 -->\n    <main>\n      <!-- 页面顶部标题横幅 -->\n      <section class=\"banner bg-gradient-to-r from-blue-600 to-blue-800 text-white py-6 px-6\">\n        <div class=\"container mx-auto\">\n          <div class=\"flex items-center justify-between\">\n            <div>\n              <h1 class=\"text-2xl md:text-3xl font-bold mb-2\">电动滑板车租赁系统</h1>\n              <p class=\"text-blue-100\">方便快捷的城市短途出行解决方案</p>\n            </div>\n            <div class=\"hidden md:block\">\n              <ScooterIcon :size=\"64\" color=\"white\" />\n            </div>\n          </div>\n        </div>\n      </section>\n\n      <!-- 地图区域 -->\n      <section class=\"map-section relative bg-gray-100\">\n        <!-- 顶部导航栏 -->\n        <div class=\"absolute top-0 left-0 right-0 bg-white/90 backdrop-blur-sm shadow-sm px-6 py-2 z-20\">\n          <div class=\"container mx-auto flex items-center justify-between\">\n            <h2 class=\"text-gray-700 font-medium\">附近地图</h2>\n            <router-link to=\"/profile\" class=\"text-gray-600 hover:text-blue-600\">\n              <el-icon size=\"20\"><User /></el-icon>\n            </router-link>\n          </div>\n        </div>\n\n        <!-- 地图主体区域 -->\n        <div class=\"map-container h-full pt-12\">\n          <!-- 定位提示 -->\n          <div v-if=\"showLocationPrompt\" class=\"location-prompt absolute top-16 left-0 right-0 mx-auto text-center z-10\">\n            <div class=\"inline-block bg-white px-4 py-2 rounded-full shadow-sm text-sm\">\n              <span class=\"text-gray-700\">需要获取您的位置以找到附近的滑板车</span>\n              <el-button type=\"primary\" size=\"small\" class=\"ml-2\" @click=\"getUserLocation\">允许</el-button>\n            </div>\n          </div>\n          \n          <!-- 位置错误提示 -->\n          <div v-else-if=\"locationError\" class=\"location-error absolute top-16 left-0 right-0 mx-auto text-center z-10\">\n            <div class=\"inline-block bg-white px-4 py-2 rounded-full shadow-sm text-sm\">\n              <span class=\"text-gray-700\">{{ locationError }}</span>\n              <el-button type=\"primary\" size=\"small\" class=\"ml-2\" @click=\"getUserLocation\">重试</el-button>\n            </div>\n          </div>\n          \n          <!-- 地图占位 -->\n          <div class=\"map-placeholder flex flex-col items-center justify-center h-[50vh] relative bg-gray-50 shadow-inner overflow-hidden\">\n            <!-- 地图中心定位点 -->\n            <div class=\"relative z-10\">\n              <!-- 定位图标 -->\n              <div class=\"bg-white rounded-full p-2 shadow-sm\">\n                <el-icon size=\"20\" class=\"text-blue-600\"><Location /></el-icon>\n              </div>\n            </div>\n            \n            <!-- 简单距离指示 -->\n            <div class=\"absolute inset-0 flex items-center justify-center pointer-events-none\">\n              <div class=\"w-[200px] h-[200px] border border-blue-200/30 rounded-full\"></div>\n            </div>\n            \n            <!-- 简单比例尺 -->\n            <div class=\"absolute bottom-2 left-2 z-10 bg-white/80 px-2 py-1 rounded text-xs text-gray-700\">\n              约200米\n            </div>\n            \n            <!-- 地图控制器 -->\n            <div class=\"absolute bottom-2 right-2 z-10\">\n              <div class=\"bg-white rounded-lg shadow-sm overflow-hidden\">\n                <button class=\"p-1.5 hover:bg-gray-100 block border-b border-gray-100\">\n                  <el-icon size=\"16\" class=\"text-gray-600\"><ZoomIn /></el-icon>\n                </button>\n                <button class=\"p-1.5 hover:bg-gray-100 block\">\n                  <el-icon size=\"16\" class=\"text-gray-600\"><ZoomOut /></el-icon>\n                </button>\n              </div>\n            </div>\n            \n            <!-- 简易滑板车指示器 - 分散放置，避免重叠 -->\n            <div class=\"absolute bottom-20 left-1/4 z-10\">\n              <div class=\"bg-white p-2 rounded-full shadow-sm\">\n                <div class=\"relative flex items-center\">\n                  <ScooterIcon :size=\"18\" color=\"#3b82f6\" />\n                  <span class=\"ml-2 text-xs text-gray-600\">120m</span>\n                </div>\n              </div>\n            </div>\n            <div class=\"absolute top-1/4 right-1/3 z-10\">\n              <div class=\"bg-white p-2 rounded-full shadow-sm\">\n                <div class=\"relative flex items-center\">\n                  <ScooterIcon :size=\"18\" color=\"#3b82f6\" />\n                  <span class=\"ml-2 text-xs text-gray-600\">180m</span>\n                </div>\n              </div>\n            </div>\n            <div class=\"absolute top-1/3 right-1/5 z-10\">\n              <div class=\"bg-white p-2 rounded-full shadow-sm\">\n                <div class=\"relative flex items-center\">\n                  <ScooterIcon :size=\"18\" color=\"#3b82f6\" />\n                  <span class=\"ml-2 text-xs text-gray-600\">150m</span>\n                </div>\n              </div>\n            </div>\n            <div class=\"absolute bottom-1/3 left-1/5 z-10\">\n              <div class=\"bg-white p-2 rounded-full shadow-sm\">\n                <div class=\"relative flex items-center\">\n                  <ScooterIcon :size=\"18\" color=\"#3b82f6\" />\n                  <span class=\"ml-2 text-xs text-gray-600\">90m</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      <!-- 车辆信息卡片区域 - 独立区域，不再覆盖地图 -->\n      <section class=\"vehicle-info bg-white py-4 border-b\">\n        <div class=\"container mx-auto px-6\">\n          <div class=\"flex items-center justify-between mb-4\">\n            <div class=\"flex items-center\">\n              <div class=\"p-2 bg-blue-50 rounded-lg mr-3\">\n                <ScooterIcon :size=\"20\" color=\"#3b82f6\" />\n              </div>\n              <div>\n                <p class=\"text-sm font-medium\">附近可用车辆</p>\n                <p class=\"text-lg font-bold text-blue-600\">12 辆</p>\n              </div>\n            </div>\n            <router-link to=\"/rent\" class=\"text-blue-600 text-sm flex items-center\">\n              查看全部\n              <el-icon class=\"ml-1\"><ArrowRight /></el-icon>\n            </router-link>\n          </div>\n          \n          <!-- 可滑动的车辆列表 -->\n          <div class=\"overflow-x-auto pb-2 -mx-1\">\n            <div class=\"flex\">\n              <div v-for=\"i in 6\" :key=\"i\" class=\"flex-shrink-0 w-36 mx-1\">\n                <div class=\"scooter-item border border-gray-100 rounded-lg p-2 hover:border-blue-200 transition-all bg-white shadow-sm\">\n                  <div class=\"flex items-center mb-2\">\n                    <ScooterIcon :size=\"18\" color=\"#3b82f6\" />\n                    <div class=\"ml-2\">\n                      <div class=\"text-xs font-medium\">E-{{ 1000 + i * 12 }}</div>\n                      <div class=\"text-xs text-gray-500\">{{ 80 + i * 20 }}m</div>\n                    </div>\n                  </div>\n                  <router-link to=\"/rent\">\n                    <el-button type=\"primary\" size=\"small\" block>租用</el-button>\n                  </router-link>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      <!-- 信息卡片区域 -->\n      <section class=\"info-cards bg-gray-50 py-4\">\n        <div class=\"container mx-auto px-6\">\n          <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <!-- 左侧卡片组 -->\n            <div>\n              <h2 class=\"text-lg font-semibold text-gray-800 mb-3\">骑行统计</h2>\n              <div class=\"grid grid-cols-2 gap-3\">\n                <div class=\"bg-white rounded-lg shadow-sm p-4\">\n                  <div class=\"flex items-center\">\n                    <div class=\"p-2 bg-blue-50 rounded-lg\">\n                      <el-icon size=\"24\" class=\"text-blue-600\"><Timer /></el-icon>\n                    </div>\n                    <div class=\"ml-3\">\n                      <h3 class=\"text-sm font-medium\">总骑行次数</h3>\n                      <p class=\"text-xl font-bold text-blue-600\">24次</p>\n                    </div>\n                  </div>\n                </div>\n                \n                <div class=\"bg-white rounded-lg shadow-sm p-4\">\n                  <div class=\"flex items-center\">\n                    <div class=\"p-2 bg-green-50 rounded-lg\">\n                      <el-icon size=\"24\" class=\"text-green-600\"><Wallet /></el-icon>\n                    </div>\n                    <div class=\"ml-3\">\n                      <h3 class=\"text-sm font-medium\">账户余额</h3>\n                      <p class=\"text-xl font-bold text-green-600\">¥25.00</p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              \n              <div class=\"mt-3 bg-white rounded-lg shadow-sm p-4\">\n                <h3 class=\"font-medium mb-2\">本月骑行</h3>\n                <div class=\"flex justify-between items-center\">\n                  <div class=\"text-center\">\n                    <p class=\"text-xl font-bold text-blue-600\">8次</p>\n                    <p class=\"text-xs text-gray-500\">骑行次数</p>\n                  </div>\n                  <div class=\"text-center\">\n                    <p class=\"text-xl font-bold text-green-600\">2.5h</p>\n                    <p class=\"text-xs text-gray-500\">总时长</p>\n                  </div>\n                  <div class=\"text-center\">\n                    <p class=\"text-xl font-bold text-orange-600\">12.8km</p>\n                    <p class=\"text-xs text-gray-500\">总里程</p>\n                  </div>\n                </div>\n              </div>\n            </div>\n            \n            <!-- 右侧卡片组 -->\n            <div>\n              <h2 class=\"text-lg font-semibold text-gray-800 mb-3\">\n                {{ userStore.isAdmin ? '管理员功能' : '推荐功能' }}\n              </h2>\n              <div class=\"bg-white rounded-lg shadow-sm p-4\">\n                <!-- 管理员专属功能 -->\n                <div v-if=\"userStore.isAdmin\" class=\"mb-3 p-2 bg-amber-50 rounded-lg border border-amber-100\">\n                  <h3 class=\"text-sm font-medium mb-2 text-amber-700\">管理员专属功能</h3>\n                  <div class=\"grid grid-cols-2 gap-3\">\n                    <div class=\"block\" @click=\"goToVehicleManagement\">\n                      <div class=\"function-card bg-amber-100 hover:bg-amber-200 rounded-lg p-3 text-center transition-all cursor-pointer\">\n                        <el-icon size=\"32\" class=\"text-amber-600 mb-1\"><Connection /></el-icon>\n                        <span class=\"text-xs block\">车辆管理</span>\n                      </div>\n                    </div>\n                    <div class=\"block\" @click=\"goToUserManagement\">\n                      <div class=\"function-card bg-amber-100 hover:bg-amber-200 rounded-lg p-3 text-center transition-all cursor-pointer\">\n                        <el-icon size=\"32\" class=\"text-amber-600 mb-1\"><UserFilled /></el-icon>\n                        <span class=\"text-xs block\">用户管理</span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n                \n                <div class=\"grid grid-cols-3 gap-3\">\n                  <router-link to=\"/rent\" class=\"block\">\n                    <div class=\"function-card bg-blue-50 hover:bg-blue-100 rounded-lg p-3 text-center transition-all cursor-pointer\">\n                      <el-icon size=\"32\" class=\"text-blue-600 mb-1\"><Location /></el-icon>\n                      <span class=\"text-xs block\">附近车辆</span>\n                    </div>\n                  </router-link>\n                  <router-link to=\"/payment\" class=\"block\">\n                    <div class=\"function-card bg-green-50 hover:bg-green-100 rounded-lg p-3 text-center transition-all cursor-pointer\">\n                      <el-icon size=\"32\" class=\"text-green-600 mb-1\"><Wallet /></el-icon>\n                      <span class=\"text-xs block\">充值余额</span>\n                    </div>\n                  </router-link>\n                  <router-link to=\"/profile\" class=\"block\">\n                    <div class=\"function-card bg-orange-50 hover:bg-orange-100 rounded-lg p-3 text-center transition-all cursor-pointer\">\n                      <el-icon size=\"32\" class=\"text-orange-600 mb-1\"><User /></el-icon>\n                      <span class=\"text-xs block\">个人中心</span>\n                    </div>\n                  </router-link>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      <!-- 精选优惠活动 -->\n      <section class=\"offers-section bg-white py-8\">\n        <div class=\"container mx-auto px-6\">\n          <div class=\"flex items-center justify-between mb-4\">\n            <h2 class=\"text-lg font-semibold text-gray-800\">精选优惠活动</h2>\n            <router-link to=\"/payment\" class=\"text-blue-600 text-sm flex items-center\">\n              更多优惠\n              <el-icon class=\"ml-1\"><ArrowRight /></el-icon>\n            </router-link>\n          </div>\n\n          <!-- 优惠活动轮播 -->\n          <el-carousel height=\"180px\" :interval=\"4000\" indicator-position=\"outside\" class=\"rounded-lg overflow-hidden shadow-sm\" trigger=\"click\">\n            <el-carousel-item v-for=\"item in promotions\" :key=\"item.id\">\n              <div class=\"carousel-item h-full bg-gradient-to-r\" :style=\"{ backgroundImage: `linear-gradient(to right, ${item.startColor}, ${item.endColor})` }\">\n                <div class=\"flex h-full items-center\">\n                  <div class=\"px-8 text-white flex-1\">\n                    <h3 class=\"text-xl font-bold mb-1\">{{ item.title }}</h3>\n                    <p class=\"text-sm opacity-90 mb-4\">{{ item.description }}</p>\n                    <router-link :to=\"item.link\">\n                      <el-button class=\"mt-2\" type=\"primary\" plain>查看详情</el-button>\n                    </router-link>\n                  </div>\n                </div>\n              </div>\n            </el-carousel-item>\n          </el-carousel>\n        </div>\n      </section>\n      \n      <!-- 特色服务 -->\n      <section class=\"features-section py-4 bg-gray-50\">\n        <div class=\"container mx-auto px-6\">\n          <h2 class=\"section-title mb-4\">我们的特色服务</h2>\n          <div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mt-2\">\n            <div class=\"feature-card\">\n              <div class=\"feature-icon bg-blue-50 text-blue-600 p-4 rounded-full inline-flex mb-4\">\n                <el-icon size=\"30\"><Position /></el-icon>\n              </div>\n              <h3 class=\"feature-title text-lg font-medium mb-2\">便捷定位</h3>\n              <p class=\"feature-desc text-gray-600\">智能地图显示，快速找到附近的可用滑板车，方便用户规划行程。</p>\n            </div>\n            \n            <div class=\"feature-card\">\n              <div class=\"feature-icon bg-green-50 text-green-600 p-4 rounded-full inline-flex mb-4\">\n                <el-icon size=\"30\"><Money /></el-icon>\n              </div>\n              <h3 class=\"feature-title text-lg font-medium mb-2\">经济实惠</h3>\n              <p class=\"feature-desc text-gray-600\">灵活的计费模式，短途出行更经济，多种套餐满足不同需求。</p>\n            </div>\n            \n            <div class=\"feature-card\">\n              <div class=\"feature-icon bg-yellow-50 text-yellow-600 p-4 rounded-full inline-flex mb-4\">\n                <el-icon size=\"30\"><Promotion /></el-icon>\n              </div>\n              <h3 class=\"feature-title text-lg font-medium mb-2\">多重优惠</h3>\n              <p class=\"feature-desc text-gray-600\">新用户专享福利，老用户推荐奖励，节假日特别活动折扣。</p>\n            </div>\n            \n            <div class=\"feature-card\">\n              <div class=\"feature-icon bg-orange-50 text-orange-600 p-4 rounded-full inline-flex mb-4\">\n                <el-icon size=\"30\"><Service /></el-icon>\n              </div>\n              <h3 class=\"feature-title text-lg font-medium mb-2\">贴心服务</h3>\n              <p class=\"feature-desc text-gray-600\">全天候客服支持，紧急情况快速响应，让您的出行更加安心。</p>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      <!-- 用户见证 -->\n      <section class=\"testimonial-section py-6 bg-gray-50\">\n        <div class=\"container mx-auto px-6\">\n          <h2 class=\"section-title mb-4\">用户见证</h2>\n          <div class=\"testimonial-container mt-2 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            <div class=\"testimonial-card bg-white p-4 rounded-lg shadow-md\">\n              <div class=\"flex items-center mb-3\">\n                <img src=\"https://randomuser.me/api/portraits/women/24.jpg\" alt=\"用户头像\" class=\"rounded-full h-12 w-12 object-cover mr-3\">\n                <div>\n                  <p class=\"font-medium\">李女士</p>\n                  <p class=\"text-xs text-gray-500\">上海</p>\n                </div>\n              </div>\n              <div class=\"testimonial-stars flex mb-2\">\n                <el-icon class=\"text-yellow-500 mr-1\"><StarFilled /></el-icon>\n                <el-icon class=\"text-yellow-500 mr-1\"><StarFilled /></el-icon>\n                <el-icon class=\"text-yellow-500 mr-1\"><StarFilled /></el-icon>\n                <el-icon class=\"text-yellow-500 mr-1\"><StarFilled /></el-icon>\n                <el-icon class=\"text-yellow-500\"><StarFilled /></el-icon>\n              </div>\n              <p class=\"testimonial-text text-sm leading-relaxed text-gray-700\">\"非常方便的出行方式，APP操作简单，找车、扫码、租赁一气呵成，价格也很合理。\"</p>\n            </div>\n            \n            <div class=\"testimonial-card bg-white p-4 rounded-lg shadow-md\">\n              <div class=\"flex items-center mb-3\">\n                <img src=\"https://randomuser.me/api/portraits/men/44.jpg\" alt=\"用户头像\" class=\"rounded-full h-12 w-12 object-cover mr-3\">\n                <div>\n                  <p class=\"font-medium\">王先生</p>\n                  <p class=\"text-xs text-gray-500\">北京</p>\n                </div>\n              </div>\n              <div class=\"testimonial-stars flex mb-2\">\n                <el-icon class=\"text-yellow-500 mr-1\"><StarFilled /></el-icon>\n                <el-icon class=\"text-yellow-500 mr-1\"><StarFilled /></el-icon>\n                <el-icon class=\"text-yellow-500 mr-1\"><StarFilled /></el-icon>\n                <el-icon class=\"text-yellow-500 mr-1\"><StarFilled /></el-icon>\n                <el-icon class=\"text-yellow-500\"><StarFilled /></el-icon>\n              </div>\n              <p class=\"testimonial-text text-sm leading-relaxed text-gray-700\">\"解决了我最后一公里的通勤问题，比等公交快多了，滑板车状态都很好，骑行很顺畅。\"</p>\n            </div>\n            \n            <div class=\"testimonial-card bg-white p-4 rounded-lg shadow-md\">\n              <div class=\"flex items-center mb-3\">\n                <img src=\"https://randomuser.me/api/portraits/women/72.jpg\" alt=\"用户头像\" class=\"rounded-full h-12 w-12 object-cover mr-3\">\n                <div>\n                  <p class=\"font-medium\">张女士</p>\n                  <p class=\"text-xs text-gray-500\">广州</p>\n                </div>\n              </div>\n              <div class=\"testimonial-stars flex mb-2\">\n                <el-icon class=\"text-yellow-500 mr-1\"><StarFilled /></el-icon>\n                <el-icon class=\"text-yellow-500 mr-1\"><StarFilled /></el-icon>\n                <el-icon class=\"text-yellow-500 mr-1\"><StarFilled /></el-icon>\n                <el-icon class=\"text-yellow-500 mr-1\"><StarFilled /></el-icon>\n                <el-icon class=\"text-gray-300\"><Star /></el-icon>\n              </div>\n              <p class=\"testimonial-text text-sm leading-relaxed text-gray-700\">\"周末骑着滑板车游览城市很方便，随取随还，客服服务态度也很好，推荐给身边的朋友了。\"</p>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      <!-- 底部扫码租车按钮 - 仅普通用户可见 -->\n      <div v-if=\"!userStore.isAdmin\" class=\"fixed bottom-6 right-6 z-50\">\n        <router-link to=\"/scan\">\n          <el-button type=\"primary\" size=\"large\" round class=\"shadow-lg\">\n            <el-icon class=\"mr-2\"><Monitor /></el-icon>\n            扫码租车\n          </el-button>\n        </router-link>\n      </div>\n\n      <!-- 底部管理员按钮 - 仅管理员可见 -->\n      <div v-else class=\"fixed bottom-6 right-6 z-50 flex flex-col space-y-3\">\n        <a href=\"/jump-admin.html\" class=\"no-underline\" target=\"_self\">\n          <el-button type=\"danger\" size=\"large\" round class=\"shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200 bg-red-600 border-red-700 animate-pulse\">\n            <el-icon class=\"mr-2\"><Setting /></el-icon>\n            管理控制台\n          </el-button>\n        </a>\n      </div>\n    </main>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted, computed } from 'vue';\nimport { \n  Location, \n  MapLocation, \n  ArrowRight, \n  Monitor, \n  Wallet, \n  User, \n  Compass, \n  ZoomIn, \n  ZoomOut,\n  Star,\n  StarFilled,\n  Money,\n  Service,\n  Position,\n  Promotion,\n  Timer,\n  ArrowDown,\n  InfoFilled,\n  Setting,\n  List,\n  Tools,\n  TrendCharts,\n  Connection,\n  UserFilled,\n  DataBoard\n} from '@element-plus/icons-vue';\nimport ScooterIcon from '@/components/ScooterIcon.vue';\nimport { useUserStore } from '@/stores/user';\nimport { ElMessage } from 'element-plus';\nimport { useRouter } from 'vue-router';\n\n// 响应式状态\nconst showScooters = ref(false);\nconst showLocationPrompt = ref(true);\nconst userStore = useUserStore();\nconst router = useRouter();\n\n// 地图相关状态\nconst mapLoaded = ref(false);\nconst nearbyScooters = ref([]);\nconst loadingScooters = ref(false);\nconst locationError = ref(null);\n\n// 默认定位（当无法获取用户位置时使用）\nconst defaultPosition = { \n  latitude: 39.9042, \n  longitude: 116.4074 // 默认位置坐标\n};\n\n// 用户位置\nconst userPosition = ref(null);\n\n// 加载地图和附近滑板车\nasync function loadNearbyScooters() {\n  try {\n    loadingScooters.value = true;\n    \n    // 模拟从API获取数据 (实际项目中应替换为真实API调用)\n    await new Promise(resolve => setTimeout(resolve, 1000));\n    \n    // 模拟数据\n    nearbyScooters.value = [\n      { id: 1, name: '滑板车-A1', available: true, battery: 85, distance: 120 },\n      { id: 2, name: '滑板车-B2', available: true, battery: 72, distance: 180 },\n      { id: 3, name: '滑板车-C3', available: true, battery: 65, distance: 150 },\n      { id: 4, name: '滑板车-D4', available: true, battery: 90, distance: 90 }\n    ];\n    \n    loadingScooters.value = false;\n    mapLoaded.value = true;\n  } catch (error) {\n    console.error('加载滑板车数据失败:', error);\n    ElMessage.error('加载滑板车数据失败，请重试');\n    loadingScooters.value = false;\n  }\n}\n\n// 获取用户位置\nasync function getUserLocation() {\n  showLocationPrompt.value = false;\n  \n  try {\n    // 检查地理定位API是否可用\n    if (!navigator.geolocation) {\n      throw new Error('您的浏览器不支持地理定位');\n    }\n    \n    // 获取当前位置\n    const position = await new Promise((resolve, reject) => {\n      navigator.geolocation.getCurrentPosition(resolve, reject, {\n        enableHighAccuracy: true,\n        timeout: 10000,\n        maximumAge: 0\n      });\n    });\n    \n    // 成功获取位置\n    userPosition.value = {\n      latitude: position.coords.latitude,\n      longitude: position.coords.longitude\n    };\n    \n    // 加载附近滑板车\n    await loadNearbyScooters();\n    \n  } catch (error) {\n    console.error('获取位置失败:', error);\n    locationError.value = error.message || '无法获取您的位置';\n    \n    // 使用默认位置\n    ElMessage.warning('无法获取您的位置，使用默认位置');\n    userPosition.value = defaultPosition;\n    \n    // 仍然加载附近滑板车\n    await loadNearbyScooters();\n  }\n}\n\n// 管理员页面导航方法\nconst goToVehicleManagement = () => {\n  console.log('正在跳转到车辆管理...');\n  if (userStore.isAdmin) {\n    ElMessage.success('正在跳转到车辆管理');\n    router.push('/admin/vehicles');\n  } else {\n    ElMessage.warning('您不是管理员，无法访问此功能');\n  }\n};\n\nconst goToUserManagement = () => {\n  console.log('正在跳转到用户管理...');\n  if (userStore.isAdmin) {\n    ElMessage.success('正在跳转到用户管理');\n    router.push('/admin/users');\n  } else {\n    ElMessage.warning('您不是管理员，无法访问此功能');\n  }\n};\n\nonMounted(() => {\n  // 延迟加载非关键内容\n  setTimeout(() => {\n    showScooters.value = true;\n  }, 500);\n\n  if (userStore.isAuthenticated) {\n    // 如果用户已登录，直接尝试获取位置\n    getUserLocation();\n  }\n});\n</script>\n\n<style>\n/* 主要内容样式 */\n.section-title {\n  font-size: 1.25rem;\n  font-weight: 600;\n  color: #374151;\n  text-align: center;\n}\n\n/* 地图样式 */\n.map-section {\n  overflow: hidden;\n}\n\n/* 功能区样式 */\n.function-card {\n  transition: all 0.2s ease;\n}\n\n.function-card:hover {\n  transform: translateY(-2px);\n}\n\n/* 特色服务样式 */\n.feature-card {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  text-align: center;\n  padding: 1rem;\n  border-radius: 0.5rem;\n  transition: all 0.3s ease;\n}\n\n.feature-card:hover {\n  box-shadow: 0 5px 15px -3px rgba(0, 0, 0, 0.1);\n  transform: translateY(-2px);\n}\n\n/* 促销卡片样式 */\n.promo-card {\n  transition: all 0.2s ease;\n}\n\n.promo-card:hover {\n  transform: scale(1.01);\n}\n\n/* 用户见证样式 */\n.testimonial-card {\n  transition: all 0.2s ease;\n}\n\n.testimonial-card:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 5px 15px -5px rgba(0, 0, 0, 0.1);\n}\n</style> "],"names":[],"mappings":"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"}