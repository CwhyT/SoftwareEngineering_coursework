{"version":3,"file":"Coupons-2a57c48b.js","sources":["../../src/views/user/Coupons.vue"],"sourcesContent":["<template>\n  <div class=\"coupons-page bg-gray-100 min-h-screen p-4\">\n    <!-- 页面标题 -->\n    <div class=\"flex justify-between items-center mb-8\">\n      <h1 class=\"text-2xl font-bold\">我的优惠券</h1>\n      <el-button type=\"primary\" class=\"bg-blue-500 text-white border-0 font-bold px-6 py-2 rounded-md\" @click=\"showCouponCenter\">\n        领取更多\n      </el-button>\n    </div>\n    \n    <!-- 优惠券类型切换 -->\n    <div class=\"bg-white rounded-lg shadow-sm mb-6\">\n      <div class=\"flex border-b\">\n        <div \n          v-for=\"tab in tabs\" \n          :key=\"tab.value\" \n          @click=\"currentTab = tab.value\"\n          class=\"p-4 flex-1 text-center cursor-pointer transition-colors\"\n          :class=\"currentTab === tab.value ? 'text-blue-600 border-b-2 border-blue-500 font-medium' : 'text-gray-600'\"\n        >\n          {{ tab.label }}\n        </div>\n      </div>\n    </div>\n    \n    <!-- 优惠券列表 -->\n    <div class=\"space-y-4\">\n      <div v-if=\"filteredCoupons.length === 0\" class=\"text-center py-10 bg-white rounded-lg shadow\">\n        <el-icon size=\"48\" class=\"text-gray-400 mb-4\"><Money /></el-icon>\n        <h3 class=\"text-lg font-medium text-gray-500\">暂无优惠券</h3>\n        <p class=\"text-gray-400 mt-2\" v-if=\"currentTab === 'unused'\">您还没有可用的优惠券</p>\n        <p class=\"text-gray-400 mt-2\" v-else-if=\"currentTab === 'used'\">您还没有已使用的优惠券</p>\n        <p class=\"text-gray-400 mt-2\" v-else>您还没有已过期的优惠券</p>\n        <el-button type=\"primary\" class=\"mt-4\" @click=\"showCouponCenter\">去获取</el-button>\n      </div>\n      \n      <div v-for=\"(coupon, index) in filteredCoupons\" :key=\"index\" class=\"coupon-card bg-white rounded-lg shadow overflow-hidden\">\n        <div class=\"relative\">\n          <!-- 左侧优惠券信息 -->\n          <div class=\"flex\">\n            <div :class=\"`coupon-left p-4 w-2/5 flex flex-col justify-center ${coupon.status === 'unused' ? 'bg-blue-500' : 'bg-gray-400'}`\">\n              <div class=\"text-white\">\n                <div class=\"text-2xl font-bold\">{{ coupon.amount }}</div>\n                <div class=\"text-sm opacity-80\">{{ coupon.type }}</div>\n              </div>\n            </div>\n            \n            <!-- 右侧优惠券详情 -->\n            <div class=\"coupon-right p-4 w-3/5\">\n              <h3 class=\"text-lg font-medium\">{{ coupon.title }}</h3>\n              <p class=\"text-xs text-gray-500 mt-1\">{{ coupon.condition }}</p>\n              <p class=\"text-xs text-gray-500 mt-1\">有效期至: {{ coupon.expireDate }}</p>\n              \n              <div class=\"mt-2\" v-if=\"coupon.status === 'unused'\">\n                <el-button size=\"small\" type=\"primary\" class=\"mt-2\" @click=\"useCoupon(coupon)\">立即使用</el-button>\n              </div>\n              <div class=\"mt-2\" v-else-if=\"coupon.status === 'used'\">\n                <span class=\"text-xs text-gray-500\">已使用</span>\n              </div>\n              <div class=\"mt-2\" v-else>\n                <span class=\"text-xs text-gray-500\">已过期</span>\n              </div>\n            </div>\n          </div>\n          \n          <!-- 优惠券状态水印 -->\n          <div v-if=\"coupon.status !== 'unused'\" class=\"absolute top-0 right-0 w-full h-full flex items-center justify-center\">\n            <div class=\"transform rotate-45 text-4xl opacity-20 font-bold text-gray-500\">\n              {{ coupon.status === 'used' ? '已使用' : '已过期' }}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    \n    <!-- 优惠券中心对话框 -->\n    <el-dialog\n      v-model=\"couponCenterVisible\"\n      title=\"优惠券中心\"\n      width=\"80%\"\n      :before-close=\"handleDialogClose\"\n    >\n      <div class=\"coupon-center\">\n        <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <div v-for=\"(offer, index) in availableOffers\" :key=\"index\" class=\"coupon-offer p-4 border border-gray-200 rounded-lg hover:shadow-md transition-shadow\">\n            <div class=\"flex justify-between items-center\">\n              <div>\n                <h3 class=\"text-lg font-medium\">{{ offer.title }}</h3>\n                <p class=\"text-xs text-gray-500 mt-1\">{{ offer.description }}</p>\n                <p class=\"text-xs text-gray-500 mt-1\">有效期: {{ offer.validity }}</p>\n              </div>\n              <div>\n                <span class=\"block text-xl font-bold text-blue-600\">{{ offer.amount }}</span>\n                <el-button size=\"small\" type=\"primary\" class=\"mt-2\" @click=\"receiveCoupon(offer)\">\n                  {{ offer.received ? '已领取' : '立即领取' }}\n                </el-button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed } from 'vue';\nimport { Money } from '@element-plus/icons-vue';\nimport { ElMessage } from 'element-plus';\n\nconst tabs = [\n  { label: '未使用', value: 'unused' },\n  { label: '已使用', value: 'used' },\n  { label: '已过期', value: 'expired' }\n];\n\nconst currentTab = ref('unused');\nconst couponCenterVisible = ref(false);\n\n// 模拟数据\nconst coupons = ref([\n  {\n    title: '新用户专享券',\n    amount: '¥10',\n    type: '无门槛抵用券',\n    condition: '无使用门槛',\n    expireDate: '2023-05-30',\n    status: 'unused'\n  },\n  {\n    title: '骑行折扣券',\n    amount: '¥5',\n    type: '满15元可用',\n    condition: '满15元可使用',\n    expireDate: '2023-05-15',\n    status: 'unused'\n  },\n  {\n    title: '周末特惠券',\n    amount: '8折',\n    type: '折扣券',\n    condition: '满30分钟可用',\n    expireDate: '2023-04-10',\n    status: 'used'\n  },\n  {\n    title: '限时优惠券',\n    amount: '¥3',\n    type: '抵用券',\n    condition: '无使用门槛',\n    expireDate: '2023-03-20',\n    status: 'expired'\n  }\n]);\n\n// 可领取的优惠券\nconst availableOffers = ref([\n  {\n    title: '五一出行特惠',\n    description: '五一假期骑行9折优惠',\n    amount: '9折',\n    validity: '2023-05-01至2023-05-05',\n    received: false\n  },\n  {\n    title: '首次充值奖励',\n    description: '首次充值满50元赠送10元',\n    amount: '¥10',\n    validity: '2023-05-31前有效',\n    received: false\n  },\n  {\n    title: '夜间骑行优惠',\n    description: '22:00-6:00骑行7折',\n    amount: '7折',\n    validity: '2023-05-31前有效',\n    received: false\n  },\n  {\n    title: '邀请好友返利',\n    description: '邀请一位好友注册获得5元奖励',\n    amount: '¥5',\n    validity: '长期有效',\n    received: false\n  }\n]);\n\n// 根据当前选中的标签过滤优惠券\nconst filteredCoupons = computed(() => {\n  return coupons.value.filter(coupon => coupon.status === currentTab.value);\n});\n\n// 显示优惠券中心\nfunction showCouponCenter() {\n  couponCenterVisible.value = true;\n}\n\n// 关闭对话框\nfunction handleDialogClose() {\n  couponCenterVisible.value = false;\n}\n\n// 领取优惠券\nfunction receiveCoupon(offer) {\n  if (offer.received) {\n    ElMessage({\n      type: 'warning',\n      message: '您已领取过该优惠券',\n      duration: 1500\n    });\n    return;\n  }\n  \n  // 将优惠券添加到用户的优惠券列表\n  coupons.value.push({\n    title: offer.title,\n    amount: offer.amount,\n    type: offer.description,\n    condition: offer.description,\n    expireDate: offer.validity.split('至').pop() || offer.validity,\n    status: 'unused'\n  });\n  \n  // 标记为已领取\n  offer.received = true;\n  \n  ElMessage({\n    type: 'success',\n    message: '优惠券领取成功',\n    duration: 1500\n  });\n}\n\n// 使用优惠券\nfunction useCoupon(coupon) {\n  ElMessage({\n    type: 'success',\n    message: '即将前往骑行页面使用优惠券',\n    duration: 1500\n  });\n  \n  // 实际应用中应该跳转到相应的使用页面\n  // router.push('/rent');\n}\n</script>\n\n<style scoped>\n.coupon-card {\n  position: relative;\n}\n\n.coupon-left::after {\n  content: \"\";\n  position: absolute;\n  top: 0;\n  right: 40%;\n  height: 100%;\n  width: 20px;\n  background-image: radial-gradient(circle at 0 50%, transparent 10px, white 10px);\n  background-size: 20px 20px;\n  background-repeat: repeat-y;\n}\n\n.coupon-offer {\n  background-color: #f9f9f9;\n  transition: all 0.2s ease;\n}\n\n.coupon-offer:hover {\n  background-color: #f0f9ff;\n  transform: translateY(-2px);\n}\n</style> "],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8GA,UAAM,OAAO;AAAA,MACX,EAAE,OAAO,OAAO,OAAO,SAAU;AAAA,MACjC,EAAE,OAAO,OAAO,OAAO,OAAQ;AAAA,MAC/B,EAAE,OAAO,OAAO,OAAO,UAAU;AAAA,IACnC;AAEA,UAAM,aAAa,IAAI,QAAQ;AAC/B,UAAM,sBAAsB,IAAI,KAAK;AAGrC,UAAM,UAAU,IAAI;AAAA,MAClB;AAAA,QACE,OAAO;AAAA,QACP,QAAQ;AAAA,QACR,MAAM;AAAA,QACN,WAAW;AAAA,QACX,YAAY;AAAA,QACZ,QAAQ;AAAA,MACT;AAAA,MACD;AAAA,QACE,OAAO;AAAA,QACP,QAAQ;AAAA,QACR,MAAM;AAAA,QACN,WAAW;AAAA,QACX,YAAY;AAAA,QACZ,QAAQ;AAAA,MACT;AAAA,MACD;AAAA,QACE,OAAO;AAAA,QACP,QAAQ;AAAA,QACR,MAAM;AAAA,QACN,WAAW;AAAA,QACX,YAAY;AAAA,QACZ,QAAQ;AAAA,MACT;AAAA,MACD;AAAA,QACE,OAAO;AAAA,QACP,QAAQ;AAAA,QACR,MAAM;AAAA,QACN,WAAW;AAAA,QACX,YAAY;AAAA,QACZ,QAAQ;AAAA,MACV;AAAA,IACF,CAAC;AAGD,UAAM,kBAAkB,IAAI;AAAA,MAC1B;AAAA,QACE,OAAO;AAAA,QACP,aAAa;AAAA,QACb,QAAQ;AAAA,QACR,UAAU;AAAA,QACV,UAAU;AAAA,MACX;AAAA,MACD;AAAA,QACE,OAAO;AAAA,QACP,aAAa;AAAA,QACb,QAAQ;AAAA,QACR,UAAU;AAAA,QACV,UAAU;AAAA,MACX;AAAA,MACD;AAAA,QACE,OAAO;AAAA,QACP,aAAa;AAAA,QACb,QAAQ;AAAA,QACR,UAAU;AAAA,QACV,UAAU;AAAA,MACX;AAAA,MACD;AAAA,QACE,OAAO;AAAA,QACP,aAAa;AAAA,QACb,QAAQ;AAAA,QACR,UAAU;AAAA,QACV,UAAU;AAAA,MACZ;AAAA,IACF,CAAC;AAGD,UAAM,kBAAkB,SAAS,MAAM;AACrC,aAAO,QAAQ,MAAM,OAAO,YAAU,OAAO,WAAW,WAAW,KAAK;AAAA,IAC1E,CAAC;AAGD,aAAS,mBAAmB;AAC1B,0BAAoB,QAAQ;AAAA,IAC9B;AAGA,aAAS,oBAAoB;AAC3B,0BAAoB,QAAQ;AAAA,IAC9B;AAGA,aAAS,cAAc,OAAO;AAC5B,UAAI,MAAM,UAAU;AAClB,kBAAU;AAAA,UACR,MAAM;AAAA,UACN,SAAS;AAAA,UACT,UAAU;AAAA,QAChB,CAAK;AACD;AAAA,MACF;AAGA,cAAQ,MAAM,KAAK;AAAA,QACjB,OAAO,MAAM;AAAA,QACb,QAAQ,MAAM;AAAA,QACd,MAAM,MAAM;AAAA,QACZ,WAAW,MAAM;AAAA,QACjB,YAAY,MAAM,SAAS,MAAM,GAAG,EAAE,IAAG,KAAM,MAAM;AAAA,QACrD,QAAQ;AAAA,MACZ,CAAG;AAGD,YAAM,WAAW;AAEjB,gBAAU;AAAA,QACR,MAAM;AAAA,QACN,SAAS;AAAA,QACT,UAAU;AAAA,MACd,CAAG;AAAA,IACH;AAGA,aAAS,UAAU,QAAQ;AACzB,gBAAU;AAAA,QACR,MAAM;AAAA,QACN,SAAS;AAAA,QACT,UAAU;AAAA,MACd,CAAG;AAAA,IAIH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}