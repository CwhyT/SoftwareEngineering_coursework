{"version":3,"file":"UserLayout-1256e502.js","sources":["../../src/layouts/UserLayout.vue"],"sourcesContent":["<template>\n  <div class=\"user-layout min-h-screen flex flex-col bg-gray-50\">\n    <!-- 导航栏 -->\n    <header class=\"bg-white shadow-sm\">\n      <div class=\"container mx-auto px-4\">\n        <div class=\"flex justify-between items-center h-16\">\n          <!-- 左侧Logo和标题 -->\n          <div class=\"flex items-center\">\n            <router-link to=\"/\" class=\"flex items-center\">\n              <ScooterIcon class=\"mr-2\" />\n              <span class=\"text-lg font-medium\">共享滑板车应用</span>\n            </router-link>\n          </div>\n\n          <!-- 如果用户是管理员，显示管理控制台入口 -->\n          <div v-if=\"userStore.isAdmin && userStore.isAuthenticated\" class=\"hidden md:flex items-center mr-4\">\n            <a href=\"/jump-admin.html\" target=\"_self\">\n              <el-button type=\"warning\" size=\"small\" class=\"font-medium hover:shadow-md\">\n                <el-icon class=\"mr-1\"><DataBoard /></el-icon>管理控制台\n              </el-button>\n            </a>\n          </div>\n          \n          <!-- 右侧导航链接 - 桌面版 -->\n          <nav class=\"hidden md:flex items-center space-x-4 px-2 py-1 rounded-lg\">\n            <router-link to=\"/\" class=\"nav-link\" active-class=\"nav-link-active\">首页</router-link>\n            <router-link v-if=\"userStore.isAuthenticated\" to=\"/rent\" class=\"nav-link\" active-class=\"nav-link-active\">租车</router-link>\n            <router-link v-if=\"userStore.isAuthenticated\" to=\"/scan\" class=\"nav-link\" active-class=\"nav-link-active\">扫码</router-link>\n            <router-link to=\"/help\" class=\"nav-link\" active-class=\"nav-link-active\">帮助</router-link>\n            <router-link to=\"/about\" class=\"nav-link\" active-class=\"nav-link-active\">关于我们</router-link>\n          </nav>\n          \n          <!-- 用户操作区 -->\n          <div class=\"flex items-center space-x-4\">\n            <template v-if=\"!userStore.isAuthenticated\">\n              <router-link to=\"/auth/login\" class=\"nav-btn bg-blue-100 text-blue-600 border border-blue-600\">\n                登录\n              </router-link>\n              <router-link to=\"/auth/register\" class=\"nav-btn bg-blue-600 text-white\">\n                注册\n              </router-link>\n            </template>\n            <template v-else>\n              <el-dropdown trigger=\"click\" @visible-change=\"dropdownVisibleChange\">\n                <div class=\"flex items-center space-x-2 cursor-pointer px-2 py-1 rounded-lg hover:bg-blue-700 transition-colors duration-200\">\n                  <div class=\"relative\">\n                    <div v-if=\"userStore.user?.avatar\" class=\"w-10 h-10 rounded-full overflow-hidden border-2 border-white shadow-md\">\n                      <img :src=\"userStore.user.avatar\" alt=\"用户头像\" class=\"w-full h-full object-cover\" />\n                    </div>\n                    <div v-else class=\"w-10 h-10 rounded-full bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center border-2 border-white shadow-md\">\n                      <span class=\"text-white font-semibold\">{{ userStore.username.charAt(0).toUpperCase() }}</span>\n                    </div>\n                    <div v-if=\"userStore.isAdmin\" class=\"absolute -bottom-1 -right-1 w-5 h-5 bg-red-500 rounded-full border-2 border-white flex items-center justify-center\">\n                      <el-icon class=\"text-white\" :size=\"10\"><Star /></el-icon>\n                    </div>\n                  </div>\n                  <div class=\"hidden sm:block\">\n                    <div class=\"text-white text-sm font-medium\">{{ userStore.username }}</div>\n                    <div class=\"text-blue-100 text-xs -mt-0.5\">{{ userStore.isAdmin ? '管理员' : '普通用户' }}</div>\n                  </div>\n                  <el-icon class=\"text-white transition-transform duration-200\" :class=\"{'rotate-180': dropdownVisible}\"><ArrowDown /></el-icon>\n                </div>\n                <template #dropdown>\n                  <el-dropdown-menu class=\"user-dropdown-menu !p-0 !min-w-64\">\n                    <div class=\"bg-gradient-to-r from-blue-600 to-blue-800 py-4 px-5 text-white rounded-t\">\n                      <div class=\"flex items-start mb-3\">\n                        <div class=\"relative mr-3\">\n                          <div v-if=\"userStore.user?.avatar\" class=\"w-14 h-14 rounded-full overflow-hidden border-2 border-white\">\n                            <img :src=\"userStore.user.avatar\" alt=\"用户头像\" class=\"w-full h-full object-cover\" />\n                          </div>\n                          <div v-else class=\"w-14 h-14 rounded-full bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center border-2 border-white\">\n                            <span class=\"text-white text-xl font-semibold\">{{ userStore.username.charAt(0).toUpperCase() }}</span>\n                          </div>\n                          <div v-if=\"userStore.isAdmin\" class=\"absolute -bottom-1 -right-1 w-5 h-5 bg-red-500 rounded-full border-2 border-white flex items-center justify-center\">\n                            <el-icon class=\"text-white\" :size=\"10\"><Star /></el-icon>\n                          </div>\n                        </div>\n                        <div class=\"flex-1\">\n                          <div class=\"font-bold text-lg mb-1\">{{ userStore.username }}</div>\n                          <div class=\"flex items-center text-sm text-blue-200\">\n                            <el-icon class=\"mr-1\"><InfoFilled /></el-icon>\n                            <span>{{ userStore.isAdmin ? '系统管理员' : '普通用户' }}</span>\n                          </div>\n                        </div>\n                      </div>\n                      <div class=\"flex justify-between items-center pt-2 border-t border-blue-500\">\n                        <div class=\"text-center flex-1\">\n                          <div class=\"text-xl font-bold\">¥ {{ userStore.user?.payment?.balance || '0.00' }}</div>\n                          <div class=\"text-xs text-blue-200\">账户余额</div>\n                        </div>\n                        <div class=\"h-10 w-px bg-blue-500\"></div>\n                        <div class=\"text-center flex-1\">\n                          <div class=\"text-xl font-bold\">{{ userStore.user?.statistics?.points || 0 }}</div>\n                          <div class=\"text-xs text-blue-200\">积分</div>\n                        </div>\n                        <div class=\"h-10 w-px bg-blue-500\"></div>\n                        <div class=\"text-center flex-1\">\n                          <div class=\"text-xl font-bold\">{{ userStore.user?.statistics?.ridesCount || 0 }}</div>\n                          <div class=\"text-xs text-blue-200\">骑行次数</div>\n                        </div>\n                      </div>\n                    </div>\n                    \n                    <div class=\"grid grid-cols-2 gap-2 p-3 bg-gray-50\">\n                      <el-dropdown-item :command=\"'/profile'\" @click=\"$router.push('/profile')\">\n                        <div class=\"flex flex-col items-center p-2 hover:bg-blue-50 rounded-lg transition\">\n                          <el-icon class=\"text-blue-600 mb-1\" :size=\"20\"><User /></el-icon>\n                          <span class=\"text-sm\">个人中心</span>\n                        </div>\n                      </el-dropdown-item>\n                      \n                      <el-dropdown-item :command=\"'/payment'\" @click=\"$router.push('/payment')\">\n                        <div class=\"flex flex-col items-center p-2 hover:bg-blue-50 rounded-lg transition\">\n                          <el-icon class=\"text-green-600 mb-1\" :size=\"20\"><Wallet /></el-icon>\n                          <span class=\"text-sm\">我的钱包</span>\n                        </div>\n                      </el-dropdown-item>\n                      \n                      <el-dropdown-item :command=\"'/trips'\" @click=\"$router.push('/trips')\">\n                        <div class=\"flex flex-col items-center p-2 hover:bg-blue-50 rounded-lg transition\">\n                          <el-icon class=\"text-purple-600 mb-1\" :size=\"20\"><Timer /></el-icon>\n                          <span class=\"text-sm\">行程记录</span>\n                        </div>\n                      </el-dropdown-item>\n                      \n                      <el-dropdown-item :command=\"'/coupons'\" @click=\"$router.push('/coupons')\">\n                        <div class=\"flex flex-col items-center p-2 hover:bg-blue-50 rounded-lg transition\">\n                          <el-icon class=\"text-yellow-600 mb-1\" :size=\"20\"><Discount /></el-icon>\n                          <span class=\"text-sm\">我的优惠券</span>\n                        </div>\n                      </el-dropdown-item>\n                      \n                      <el-dropdown-item :command=\"'/messages'\" @click=\"$router.push('/messages')\">\n                        <div class=\"flex flex-col items-center p-2 hover:bg-blue-50 rounded-lg transition\">\n                          <div class=\"relative\">\n                            <el-icon class=\"text-indigo-600 mb-1\" :size=\"20\"><ChatLineRound /></el-icon>\n                            <div class=\"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full text-white flex items-center justify-center\">\n                              <span class=\"text-xs\">2</span>\n                            </div>\n                          </div>\n                          <span class=\"text-sm\">消息通知</span>\n                        </div>\n                      </el-dropdown-item>\n                      \n                      <el-dropdown-item :command=\"'/security'\" @click=\"$router.push('/security')\">\n                        <div class=\"flex flex-col items-center p-2 hover:bg-blue-50 rounded-lg transition\">\n                          <el-icon class=\"text-red-600 mb-1\" :size=\"20\"><Lock /></el-icon>\n                          <span class=\"text-sm\">安全设置</span>\n                        </div>\n                      </el-dropdown-item>\n                    </div>\n                    \n                    <div class=\"p-3 border-t border-gray-200\">\n                      <el-dropdown-item v-if=\"userStore.isAdmin\" :command=\"'/admin'\">\n                        <div class=\"flex items-center p-2 bg-amber-50 rounded-lg hover:bg-amber-100 transition\" @click=\"goToAdminConsole\">\n                          <el-icon class=\"text-amber-600 mr-2\" :size=\"18\"><DataBoard /></el-icon>\n                          <span>管理控制台</span>\n                        </div>\n                      </el-dropdown-item>\n                      \n                      <el-dropdown-item>\n                        <div class=\"flex items-center p-2 mt-2 bg-red-50 rounded-lg text-red-600 hover:bg-red-100 transition\" @click=\"handleLogout\">\n                          <el-icon class=\"mr-2\" :size=\"18\"><SwitchButton /></el-icon>\n                          <span>退出登录</span>\n                        </div>\n                      </el-dropdown-item>\n                    </div>\n                  </el-dropdown-menu>\n                </template>\n              </el-dropdown>\n            </template>\n            \n            <!-- 移动端菜单按钮 -->\n            <button @click=\"mobileMenuOpen = !mobileMenuOpen\" class=\"md:hidden\">\n              <el-icon size=\"24\"><Menu /></el-icon>\n            </button>\n          </div>\n        </div>\n      </div>\n      \n      <!-- 移动端菜单 -->\n      <div v-show=\"mobileMenuOpen\" class=\"md:hidden fixed inset-0 bg-gray-900 bg-opacity-50 z-40\" @click=\"closeMobileMenu\">\n        <div class=\"absolute right-0 top-0 h-full w-64 bg-white shadow-lg\" @click.stop>\n          <div class=\"p-4 border-b relative\">\n            <button @click=\"closeMobileMenu\" class=\"absolute top-4 right-4 text-gray-500\">\n              <el-icon size=\"20\"><Close /></el-icon>\n            </button>\n            <h3 class=\"text-lg font-medium text-gray-900\">导航菜单</h3>\n          </div>\n          \n          <div class=\"p-4\">\n            <router-link to=\"/\" class=\"block px-3 py-2 rounded bg-blue-600 text-white mb-2\" @click=\"closeMobileMenu\">首页</router-link>\n            <router-link v-if=\"userStore.isAuthenticated\" to=\"/rent\" class=\"block px-3 py-2 rounded bg-blue-600 text-white mb-2\" @click=\"closeMobileMenu\">租车</router-link>\n            <router-link v-if=\"userStore.isAuthenticated\" to=\"/scan\" class=\"block px-3 py-2 rounded bg-blue-600 text-white mb-2\" @click=\"closeMobileMenu\">扫码</router-link>\n            <router-link to=\"/help\" class=\"block px-3 py-2 rounded bg-blue-600 text-white mb-2\" @click=\"closeMobileMenu\">帮助</router-link>\n            <router-link to=\"/about\" class=\"block px-3 py-2 rounded bg-blue-600 text-white mb-2\" @click=\"closeMobileMenu\">关于我们</router-link>\n            \n            <!-- 管理员专属控制台入口 -->\n            <a \n              v-if=\"userStore.isAdmin\" \n              href=\"/jump-admin.html\" \n              class=\"block px-3 py-2 rounded bg-red-600 text-white mb-4 font-bold flex items-center justify-center\"\n              @click=\"closeMobileMenu\"\n              target=\"_self\"\n            >\n              <el-icon class=\"mr-2\"><Setting /></el-icon>\n              管理控制台\n            </a>\n            \n            <div v-if=\"userStore.isAuthenticated\" class=\"py-1 border-t border-blue-600 mt-2 pt-2\">\n              <button @click=\"handleLogout(); closeMobileMenu()\" class=\"block px-3 py-2 rounded bg-red-500 text-white w-full text-left flex items-center\">\n                <el-icon class=\"mr-2 text-white\"><SwitchButton /></el-icon>\n                退出登录\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </header>\n    \n    <main class=\"main-content flex-grow\">\n      <router-view></router-view>\n    </main>\n    \n    <footer class=\"bg-gray-800 text-white py-8\">\n      <div class=\"container mx-auto px-4\">\n        <div class=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\n          <div>\n            <h3 class=\"text-lg font-bold mb-4\">共享滑板车</h3>\n            <p class=\"text-gray-400\">便捷、环保、经济的城市短途出行解决方案</p>\n          </div>\n          <div>\n            <h3 class=\"text-lg font-bold mb-4\">快速链接</h3>\n            <ul class=\"space-y-2\">\n              <li><router-link to=\"/about\" class=\"text-gray-400\">关于我们</router-link></li>\n              <li><router-link to=\"/help\" class=\"text-gray-400\">帮助中心</router-link></li>\n              <li><a href=\"#\" class=\"text-gray-400\">联系我们</a></li>\n            </ul>\n          </div>\n          <div>\n            <h3 class=\"text-lg font-bold mb-4\">联系方式</h3>\n            <p class=\"text-gray-400\">电话: 400-123-4567</p>\n            <p class=\"text-gray-400\">邮箱: support@scooter-sharing.com</p>\n          </div>\n        </div>\n        <div class=\"mt-8 pt-4 border-t border-gray-700 text-center text-gray-500\">\n          <p>&copy; 2024 共享滑板车应用 - 软件工程课程作业</p>\n        </div>\n      </div>\n    </footer>\n  </div>\n</template>\n\n<script setup>\nimport { ref } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { useUserStore } from '@/stores/user';\nimport { ElMessageBox, ElMessage } from 'element-plus';\nimport { \n  Menu, \n  ArrowDown, \n  User, \n  Setting, \n  SwitchButton,\n  Wallet,\n  Money,\n  Timer,\n  Star,\n  InfoFilled,\n  Switch,\n  DataBoard,\n  Close,\n  Warning,\n  Discount,\n  ChatLineRound,\n  Lock\n} from '@element-plus/icons-vue';\nimport ScooterIcon from '@/components/ScooterIcon.vue';\n\nconst router = useRouter();\nconst userStore = useUserStore();\nconst mobileMenuOpen = ref(false);\nconst dropdownVisible = ref(false);\n\n// 处理下拉菜单状态变化\nconst dropdownVisibleChange = (visible) => {\n  dropdownVisible.value = visible;\n};\n\n// 处理退出登录\nconst handleLogout = () => {\n  ElMessageBox.confirm('确定要退出登录吗?', '提示', {\n    confirmButtonText: '确定',\n    cancelButtonText: '取消',\n    type: 'warning'\n  }).then(() => {\n    userStore.logout();\n    router.push('/');\n  }).catch(() => {});\n};\n\n// 处理切换用户角色\nconst switchUserRole = () => {\n  userStore.switchRole();\n  \n  // 根据切换后的角色显示对应消息\n  if (userStore.isAdmin) {\n    ElMessage.success('已切换为管理员角色');\n  } else {\n    ElMessage.success('已切换为普通用户角色');\n  }\n  \n  // 如果从管理员切换到普通用户，检查当前页面是否是管理员页面\n  // 如果是管理员页面，则重定向到首页\n  if (!userStore.isAdmin && router.currentRoute.value.path.includes('/admin')) {\n    router.push('/');\n  }\n  \n  // 关闭移动端菜单\n  mobileMenuOpen.value = false;\n};\n\n// 处理关闭移动端菜单\nconst closeMobileMenu = () => {\n  mobileMenuOpen.value = false;\n};\n\n// 前往管理控制台\nconst goToAdminConsole = () => {\n  window.location.href = '/jump-admin.html';\n};\n</script>\n\n<style scoped>\n.user-layout {\n  display: flex;\n  flex-direction: column;\n  min-height: 100vh;\n}\n\n.main-content {\n  flex: 1;\n}\n\n.nav-link {\n  @apply px-3 py-2 rounded-md text-sm font-medium text-white bg-blue-600 mx-1;\n}\n\n.nav-link-active {\n  @apply bg-blue-500;\n}\n\n.nav-btn {\n  @apply px-3 py-1.5 rounded-md text-sm font-medium;\n}\n\n.mobile-nav-link {\n  @apply block px-3 py-2 rounded-md text-base font-medium text-white bg-blue-600;\n}\n\n.mobile-nav-link-active {\n  @apply bg-blue-600;\n}\n\n.user-dropdown-menu {\n  min-width: 200px;\n}\n</style>\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuRA,UAAM,SAAS,UAAS;AACxB,UAAM,YAAY,aAAY;AAC9B,UAAM,iBAAiB,IAAI,KAAK;AAChC,UAAM,kBAAkB,IAAI,KAAK;AAGjC,UAAM,wBAAwB,CAAC,YAAY;AACzC,sBAAgB,QAAQ;AAAA,IAC1B;AAGA,UAAM,eAAe,MAAM;AACzB,mBAAa,QAAQ,aAAa,MAAM;AAAA,QACtC,mBAAmB;AAAA,QACnB,kBAAkB;AAAA,QAClB,MAAM;AAAA,MACV,CAAG,EAAE,KAAK,MAAM;AACZ,kBAAU,OAAM;AAChB,eAAO,KAAK,GAAG;AAAA,MACnB,CAAG,EAAE,MAAM,MAAM;AAAA,MAAA,CAAE;AAAA,IACnB;AAwBA,UAAM,kBAAkB,MAAM;AAC5B,qBAAe,QAAQ;AAAA,IACzB;AAGA,UAAM,mBAAmB,MAAM;AAC7B,aAAO,SAAS,OAAO;AAAA,IACzB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}