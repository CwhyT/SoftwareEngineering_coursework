{"version":3,"file":"Rent-da561804.js","sources":["../../src/views/user/Rent.vue"],"sourcesContent":["<template>\n  <div class=\"rent-page bg-gray-100 min-h-screen p-4\">\n    <!-- 页面标题 -->\n    <div class=\"flex justify-between items-center mb-8\">\n      <h1 class=\"text-2xl font-bold\">附近车辆</h1>\n      <el-button type=\"primary\" class=\"bg-blue-500 text-white border-0 font-bold px-6 py-2 rounded-md\">\n        查看全部\n      </el-button>\n    </div>\n    \n    <!-- 租车流程指引 -->\n    <div class=\"bg-white rounded-lg shadow p-5 mb-8\">\n      <div class=\"flex items-center\">\n        <div class=\"flex-1 text-center\">\n          <div class=\"w-12 h-12 rounded-full flex items-center justify-center mx-auto\"\n               :class=\"activeStep >= 1 ? 'bg-blue-500 text-white' : 'bg-gray-300 text-white'\">1</div>\n          <div class=\"mt-3 text-base font-medium\" :class=\"activeStep >= 1 ? '' : 'text-gray-500'\">选择车辆</div>\n        </div>\n        <div class=\"w-10 h-px\" :class=\"activeStep >= 2 ? 'bg-blue-300' : 'bg-gray-300'\"></div>\n        <div class=\"flex-1 text-center\">\n          <div class=\"w-12 h-12 rounded-full flex items-center justify-center mx-auto\"\n               :class=\"activeStep >= 2 ? 'bg-blue-500 text-white' : 'bg-gray-300 text-white'\">2</div>\n          <div class=\"mt-3 text-base font-medium\" :class=\"activeStep >= 2 ? '' : 'text-gray-500'\">确认信息</div>\n        </div>\n        <div class=\"w-10 h-px\" :class=\"activeStep >= 3 ? 'bg-blue-300' : 'bg-gray-300'\"></div>\n        <div class=\"flex-1 text-center\">\n          <div class=\"w-12 h-12 rounded-full flex items-center justify-center mx-auto\"\n               :class=\"activeStep >= 3 ? 'bg-blue-500 text-white' : 'bg-gray-300 text-white'\">3</div>\n          <div class=\"mt-3 text-base font-medium\" :class=\"activeStep >= 3 ? '' : 'text-gray-500'\">开始使用</div>\n        </div>\n      </div>\n    </div>\n    \n    <!-- 步骤内容区域 -->\n    <transition name=\"fade\" mode=\"out-in\">\n      <div :key=\"activeStep\">\n        <!-- 车辆列表区域 -->\n        <div v-if=\"activeStep === 1\">\n          <!-- 搜索栏 -->\n          <div class=\"bg-white rounded-lg shadow p-5 mb-6 flex items-center\">\n            <div class=\"flex-1\">\n              <div class=\"text-lg font-medium mb-1\">{{ currentLocation || '正在获取位置...' }}</div>\n              <div class=\"text-sm text-gray-500\">找到 {{ scooters.length }} 辆可用车辆</div>\n            </div>\n            <el-button type=\"primary\" @click=\"refreshScooters\" :loading=\"isLoading\" class=\"bg-blue-500 text-white border-0 font-bold px-4 py-2 rounded-md\">\n              刷新列表\n            </el-button>\n          </div>\n          \n          <!-- 车辆列表 -->\n          <div v-if=\"scooters.length > 0\" class=\"space-y-5 mb-8\">\n            <div \n              v-for=\"scooter in scooters\" \n              :key=\"scooter.id\"\n              class=\"bg-white rounded-lg shadow p-5\"\n            >\n              <div class=\"flex items-center justify-between\">\n                <div class=\"flex items-center\">\n                  <div class=\"bg-blue-50 p-4 rounded-lg mr-4\">\n                    <span class=\"text-xl\">🛴</span>\n                  </div>\n                  <div>\n                    <div class=\"text-lg font-medium\">车辆编号: {{ scooter.id }}</div>\n                    <div class=\"text-sm text-gray-500 mt-2\">距离: {{ formatDistance(scooter.distance) }}</div>\n                  </div>\n                </div>\n                \n                <el-button \n                  type=\"primary\" \n                  size=\"small\" \n                  :disabled=\"scooter.battery < 20\"\n                  @click=\"selectScooter(scooter)\"\n                  class=\"bg-blue-500 text-white border-0 font-bold px-6 py-2 text-base rounded-md\"\n                  :class=\"scooter.battery < 20 ? 'bg-red-500' : ''\"\n                >\n                  {{ scooter.battery < 20 ? '电量不足' : '立即租用' }}\n                </el-button>\n              </div>\n              \n              <div class=\"mt-4 grid grid-cols-2 gap-6\">\n                <div class=\"flex items-center\">\n                  <div class=\"text-sm text-gray-500 mr-2\">电量:</div>\n                  <div class=\"flex-1 bg-gray-200 h-3 rounded-full overflow-hidden\">\n                    <div \n                      class=\"h-full\" \n                      :style=\"{ \n                        width: `${scooter.battery}%`,\n                        backgroundColor: getBatteryColor(scooter.battery)\n                      }\"\n                    ></div>\n                  </div>\n                  <div class=\"ml-2 text-sm\" :class=\"getBatteryTextColor(scooter.battery)\">\n                    {{ scooter.battery }}%\n                  </div>\n                </div>\n                <div class=\"text-sm text-right\">\n                  <span class=\"text-gray-500\">价格:</span>\n                  <span class=\"text-blue-600 ml-1 font-medium\">¥2.00/15分钟</span>\n                </div>\n              </div>\n            </div>\n          </div>\n          \n          <!-- 加载状态 -->\n          <div v-else-if=\"isLoading\" class=\"bg-white rounded-lg shadow p-6 text-center\">\n            <div class=\"inline-block animate-spin mb-2\">\n              <svg class=\"w-8 h-8 text-blue-500\" fill=\"none\" viewBox=\"0 0 24 24\">\n                <circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle>\n                <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n              </svg>\n            </div>\n            <div class=\"text-gray-500\">正在搜索附近车辆...</div>\n          </div>\n          \n          <!-- 无车辆状态 -->\n          <div v-else class=\"bg-white rounded-lg shadow p-6 text-center\">\n            <div class=\"text-gray-400 text-5xl mb-2\">🔍</div>\n            <div class=\"text-lg font-medium mb-2\">附近暂无可用车辆</div>\n            <div class=\"text-sm text-gray-500 mb-4\">请尝试调整位置或稍后再试</div>\n            <el-button type=\"primary\" @click=\"refreshScooters\" class=\"bg-blue-500 text-white border-0 font-bold px-6 py-2 rounded-md\">刷新列表</el-button>\n          </div>\n          \n          <!-- 扫码用车入口 -->\n          <div class=\"mt-6 bg-white rounded-lg shadow p-5\">\n            <div class=\"flex items-center justify-between\">\n              <div>\n                <div class=\"font-medium\">找不到合适的车辆?</div>\n                <div class=\"text-sm text-gray-500 mt-1\">使用扫码方式快速租用</div>\n              </div>\n              <el-button type=\"success\" @click=\"goToScanPage\" class=\"bg-green-500 text-white border-0 font-bold px-6 py-2 rounded-md\">\n                扫码用车\n              </el-button>\n            </div>\n          </div>\n        </div>\n        \n        <!-- 确认租车信息 -->\n        <div v-else-if=\"activeStep === 2\" class=\"bg-white rounded-lg shadow p-5 mb-8\">\n          <!-- 返回按钮 -->\n          <div class=\"mb-5\">\n            <el-button size=\"small\" @click=\"activeStep = 1\" class=\"font-bold\">\n              <el-icon class=\"mr-1\"><Back /></el-icon>\n              返回列表\n            </el-button>\n          </div>\n          \n          <!-- 车辆信息 -->\n          <div v-if=\"selectedScooter\" class=\"border-b pb-4 mb-4\">\n            <div class=\"flex items-center mb-4\">\n              <div class=\"bg-blue-100 p-3 rounded-lg text-3xl mr-4\">🛴</div>\n              <div class=\"flex-1\">\n                <div class=\"text-lg font-medium\">车辆编号: {{ selectedScooter.id }}</div>\n                <div class=\"flex items-center text-sm text-gray-500 mt-1\">\n                  <span class=\"mr-3\">电量: {{ selectedScooter.battery }}%</span>\n                  <span>距离: {{ formatDistance(selectedScooter.distance) }}</span>\n                </div>\n              </div>\n            </div>\n          </div>\n          \n          <!-- 租赁时长选择 -->\n          <div class=\"mb-4\">\n            <h3 class=\"text-lg font-medium mb-3\">选择租赁方式</h3>\n            \n            <!-- 租赁方式选择 -->\n            <div class=\"flex mb-4\">\n              <div \n                class=\"flex-1 text-center p-3 border-b-2 cursor-pointer\"\n                :class=\"rentalMode === 'duration' ? 'border-blue-500 text-blue-600 font-medium' : 'border-gray-200 text-gray-500'\"\n                @click=\"switchRentalMode('duration')\"\n              >\n                按时长租赁\n              </div>\n              <div \n                class=\"flex-1 text-center p-3 border-b-2 cursor-pointer\"\n                :class=\"rentalMode === 'reservation' ? 'border-blue-500 text-blue-600 font-medium' : 'border-gray-200 text-gray-500'\"\n                @click=\"switchRentalMode('reservation')\"\n              >\n                预约时段\n              </div>\n            </div>\n            \n            <!-- 按时长租赁 -->\n            <div v-if=\"rentalMode === 'duration'\">\n              <!-- 快捷时长选项 -->\n              <div class=\"grid grid-cols-2 gap-2 sm:grid-cols-4 mb-3\">\n                <div \n                  v-for=\"option in rentalDurationOptions\" \n                  :key=\"option.value\"\n                  class=\"border rounded-lg p-3 cursor-pointer transition-colors\"\n                  :class=\"selectedRentalDuration === option.value ? 'border-blue-500 bg-blue-50' : 'border-gray-200 hover:border-blue-300'\"\n                  @click=\"selectRentalDuration(option.value)\"\n                >\n                  <div class=\"text-center\">\n                    <div class=\"font-medium text-lg\">{{ option.label }}</div>\n                    <div class=\"text-blue-600 font-medium mt-1\">¥{{ option.price.toFixed(2) }}</div>\n                  </div>\n                </div>\n                \n                <!-- 自定义选项 -->\n                <div \n                  class=\"border rounded-lg p-3 cursor-pointer transition-colors\"\n                  :class=\"isCustomDuration ? 'border-blue-500 bg-blue-50' : 'border-gray-200 hover:border-blue-300'\"\n                  @click=\"toggleCustomDuration\"\n                >\n                  <div class=\"text-center\">\n                    <div class=\"font-medium text-lg\">自定义</div>\n                    <div class=\"text-blue-600 font-medium mt-1\">\n                      <el-icon><Edit /></el-icon>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              \n              <!-- 自定义时长选择器 -->\n              <div v-if=\"isCustomDuration\" class=\"bg-gray-50 rounded-lg p-4 mb-3 animate-fadeIn\">\n                <div class=\"mb-3\">\n                  <div class=\"text-sm text-gray-600 mb-2\">选择租赁时长</div>\n                  <div class=\"flex flex-wrap gap-2\">\n                    <div class=\"w-full sm:w-auto\">\n                      <div class=\"grid grid-cols-2 gap-2\">\n                        <div>\n                          <label class=\"text-sm text-gray-500 block mb-1\">小时</label>\n                          <el-input-number \n                            v-model=\"customHours\" \n                            :min=\"0\" \n                            :max=\"72\"\n                            size=\"large\"\n                            @change=\"updateCustomDuration\"\n                          />\n                        </div>\n                        <div>\n                          <label class=\"text-sm text-gray-500 block mb-1\">分钟</label>\n                          <el-input-number \n                            v-model=\"customMinutes\" \n                            :min=\"0\" \n                            :max=\"59\" \n                            :step=\"15\"\n                            size=\"large\"\n                            @change=\"updateCustomDuration\"\n                          />\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n                \n                <div class=\"flex justify-between text-sm\">\n                  <span class=\"text-gray-600\">预计费用:</span>\n                  <span class=\"text-blue-600 font-medium\">¥{{ calculateCustomPrice().toFixed(2) }}</span>\n                </div>\n                \n                <div class=\"text-xs text-gray-500 mt-2\">\n                  注意: 自定义时长最长不超过3天(72小时)，超出租期将收取额外费用\n                </div>\n              </div>\n            </div>\n            \n            <!-- 预约时段 -->\n            <div v-else class=\"bg-gray-50 rounded-lg p-4 mb-3 animate-fadeIn\">\n              <div class=\"mb-4\">\n                <div class=\"mb-4\">\n                  <label class=\"text-sm text-gray-600 block mb-2\">开始时间</label>\n                  <el-date-picker\n                    v-model=\"reservationStartTime\"\n                    type=\"datetime\"\n                    placeholder=\"选择开始时间\"\n                    format=\"YYYY-MM-DD HH:mm\"\n                    value-format=\"YYYY-MM-DD HH:mm\"\n                    :disabled-date=\"disablePastDates\"\n                    :disabled-hours=\"disablePastHours\"\n                    @change=\"updateReservation\"\n                    class=\"w-full\"\n                    size=\"large\"\n                  />\n                </div>\n                \n                <div>\n                  <label class=\"text-sm text-gray-600 block mb-2\">结束时间</label>\n                  <el-date-picker\n                    v-model=\"reservationEndTime\"\n                    type=\"datetime\"\n                    placeholder=\"选择结束时间\"\n                    format=\"YYYY-MM-DD HH:mm\"\n                    value-format=\"YYYY-MM-DD HH:mm\"\n                    :disabled-date=\"disableInvalidEndDates\"\n                    @change=\"updateReservation\"\n                    class=\"w-full\"\n                    size=\"large\"\n                  />\n                </div>\n              </div>\n              \n              <div class=\"flex justify-between items-center text-sm border-t border-gray-200 pt-3\">\n                <span class=\"text-gray-600\">预约费用:</span>\n                <span class=\"text-blue-600 font-medium\">¥{{ calculateReservationPrice().toFixed(2) }}</span>\n              </div>\n              \n              <div class=\"mt-3 text-xs text-gray-500\">\n                <div class=\"flex items-start\">\n                  <el-icon class=\"mt-0.5 mr-1 text-orange-500\"><Warning /></el-icon>\n                  <div>预约时间必须至少提前1小时，且最长不超过7天</div>\n                </div>\n                <div class=\"flex items-start mt-1\">\n                  <el-icon class=\"mt-0.5 mr-1 text-orange-500\"><Warning /></el-icon>\n                  <div>预约成功后，请在预约时间内前往取车，否则预约将自动取消</div>\n                </div>\n              </div>\n            </div>\n          </div>\n          \n          <!-- 价格明细 -->\n          <div class=\"mb-4\">\n            <h3 class=\"text-lg font-medium mb-3\">价格明细</h3>\n            <div class=\"bg-gray-50 rounded-lg p-4\">\n              <div class=\"flex justify-between mb-2\">\n                <span class=\"text-gray-600\">{{ getSelectedDurationLabel() }}</span>\n                <span class=\"font-medium\">¥{{ getSelectedDurationPrice().toFixed(2) }}</span>\n              </div>\n              <div class=\"flex justify-between mb-2\">\n                <span class=\"text-gray-600\">超时费用</span>\n                <span class=\"font-medium\">¥2.00/15分钟</span>\n              </div>\n              <div class=\"flex justify-between mb-2\">\n                <span class=\"text-gray-600\">押金（可退）</span>\n                <span class=\"font-medium\">¥99.00</span>\n              </div>\n              <div class=\"border-t border-gray-200 mt-2 pt-2 flex justify-between text-lg\">\n                <span class=\"font-medium\">需支付</span>\n                <span class=\"text-red-500 font-bold\">¥{{ (getSelectedDurationPrice() + 99.00).toFixed(2) }}</span>\n              </div>\n            </div>\n          </div>\n          \n          <!-- 用车须知 -->\n          <div class=\"mb-4\">\n            <h3 class=\"text-lg font-medium mb-3\">用车须知</h3>\n            <div class=\"bg-gray-50 rounded-lg p-4 text-sm text-gray-600\">\n              <div class=\"flex items-start mb-2\">\n                <el-icon class=\"mt-0.5 mr-2 text-green-500\"><Check /></el-icon>\n                <div>骑行前请检查车辆状况，如有问题请联系客服</div>\n              </div>\n              <div class=\"flex items-start mb-2\">\n                <el-icon class=\"mt-0.5 mr-2 text-green-500\"><Check /></el-icon>\n                <div>请遵守交通规则，注意安全，不要逆行或闯红灯</div>\n              </div>\n              <div class=\"flex items-start mb-2\">\n                <el-icon class=\"mt-0.5 mr-2 text-green-500\"><Check /></el-icon>\n                <div>使用完毕请停放在指定区域，避免影响他人通行</div>\n              </div>\n              <div class=\"flex items-start\">\n                <el-icon class=\"mt-0.5 mr-2 text-green-500\"><Check /></el-icon>\n                <div>结束行程后系统将自动退还押金至您的账户</div>\n              </div>\n            </div>\n          </div>\n          \n          <!-- 支付按钮 -->\n          <div class=\"flex justify-center\">\n            <el-button \n              type=\"primary\" \n              size=\"large\" \n              class=\"w-full font-bold\"\n              :loading=\"isSubmitting\"\n              @click=\"confirmRent\"\n            >\n              确认支付并用车\n            </el-button>\n          </div>\n        </div>\n        \n        <!-- 租车成功 -->\n        <div v-else-if=\"activeStep === 3\" class=\"bg-white rounded-lg shadow p-6 text-center\">\n          <div class=\"inline-block p-4 bg-green-100 rounded-full mb-4\">\n            <el-icon class=\"text-4xl text-green-500\"><Check /></el-icon>\n          </div>\n          <h2 class=\"text-xl font-bold mb-2\">{{ isReservation ? '预约成功！' : '租车成功！' }}</h2>\n          <p class=\"text-gray-500 mb-6\">{{ isReservation ? '您已成功预约车辆，请在预约时间内前往取车' : '您已成功租用车辆，祝您用车愉快' }}</p>\n          \n          <div class=\"bg-gray-50 rounded-lg p-4 mb-6\">\n            <div class=\"flex items-center justify-between mb-3\">\n              <span class=\"text-gray-500\">车辆编号</span>\n              <span class=\"font-medium\">{{ selectedScooter?.id }}</span>\n            </div>\n            \n            <template v-if=\"isReservation\">\n              <div class=\"flex items-center justify-between mb-3\">\n                <span class=\"text-gray-500\">预约ID</span>\n                <span class=\"font-medium\">{{ rentalInfo.reservationId }}</span>\n              </div>\n              <div class=\"flex items-center justify-between mb-3\">\n                <span class=\"text-gray-500\">预约时间</span>\n                <span class=\"font-medium\">{{ formatReservationTime(rentalInfo.startTime) }}</span>\n              </div>\n              <div class=\"flex items-center justify-between mb-3\">\n                <span class=\"text-gray-500\">结束时间</span>\n                <span class=\"font-medium\">{{ formatReservationTime(rentalInfo.endTime) }}</span>\n              </div>\n            </template>\n            \n            <template v-else>\n              <div class=\"flex items-center justify-between mb-3\">\n                <span class=\"text-gray-500\">开始时间</span>\n                <span class=\"font-medium\">{{ formatTime(rentalInfo.startTime) }}</span>\n              </div>\n              <div class=\"flex items-center justify-between mb-3\">\n                <span class=\"text-gray-500\">租赁时长</span>\n                <span class=\"font-medium\">{{ getSelectedDurationLabel() }}</span>\n              </div>\n              <div class=\"flex items-center justify-between mb-3\">\n                <span class=\"text-gray-500\">预计结束时间</span>\n                <span class=\"font-medium\">{{ formatDateTime(rentalInfo.endTime) }}</span>\n              </div>\n            </template>\n            \n            <div class=\"flex items-center justify-between\">\n              <span class=\"text-gray-500\">计费说明</span>\n              <span class=\"font-medium\">¥{{ rentalInfo.rentalPrice?.toFixed(2) }}</span>\n            </div>\n          </div>\n          \n          <div v-if=\"isReservation\" class=\"mb-6\">\n            <el-button type=\"danger\" @click=\"showCancelConfirm\" class=\"font-bold\">取消预约</el-button>\n          </div>\n          \n          <el-button type=\"primary\" @click=\"goToProfile\" class=\"font-bold\">查看{{ isReservation ? '预约' : '订单' }}详情</el-button>\n          <el-button class=\"ml-2 font-bold\" @click=\"goToHome\">返回首页</el-button>\n        </div>\n      </div>\n    </transition>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { useUserStore } from '@/stores/user';\nimport { ElMessage, ElLoading, ElMessageBox } from 'element-plus';\nimport { Check, Back, Edit, Warning } from '@element-plus/icons-vue';\n\nconst router = useRouter();\nconst userStore = useUserStore();\nconst scooters = ref([]);\nconst isLoading = ref(false);\nconst isSubmitting = ref(false);\nconst selectedScooter = ref(null);\nconst currentLocation = ref('');\nconst activeStep = ref(1);\nconst rentalInfo = ref({});\nconst selectedRentalDuration = ref('1'); // 默认选择1小时\nconst isCustomDuration = ref(false); // 是否使用自定义时长\nconst customHours = ref(1); // 自定义小时数\nconst customMinutes = ref(0); // 自定义分钟数\nconst customDurationValue = ref('custom_1:0'); // 自定义时长值，格式: custom_小时:分钟\nconst rentalMode = ref('duration'); // 'duration' 或 'reservation'\nconst reservationStartTime = ref('');\nconst reservationEndTime = ref('');\nconst isReservation = computed(() => rentalMode.value === 'reservation');\n\n// 租赁时长选项\nconst rentalDurationOptions = [\n  { value: '1', label: '1小时', price: 8.00 },\n  { value: '4', label: '4小时', price: 25.00 },\n  { value: '1d', label: '1天', price: 50.00 },\n  { value: '7d', label: '1周', price: 280.00 }\n];\n\n// 获取附近车辆数据\nconst fetchNearbyScooters = async () => {\n  if (isLoading.value) return;\n  \n  isLoading.value = true;\n  try {\n    // 获取当前位置 (模拟)\n    await new Promise(resolve => setTimeout(resolve, 500));\n    \n    // 模拟位置名称\n    currentLocation.value = '某某大学北门附近';\n    \n    // 模拟API请求获取附近车辆\n    await new Promise(resolve => setTimeout(resolve, 800));\n    \n    // 生成模拟数据\n    scooters.value = generateMockScooters();\n    \n    ElMessage({\n      type: 'success',\n      message: '已更新车辆列表',\n      duration: 1500\n    });\n  } catch (error) {\n    console.error('获取车辆失败:', error);\n    ElMessage({\n      type: 'error',\n      message: '获取车辆列表失败',\n      duration: 1500\n    });\n  } finally {\n    isLoading.value = false;\n  }\n};\n\n// 生成模拟车辆数据\nconst generateMockScooters = () => {\n  const count = 5; // 固定数量，确保稳定性\n  const result = [];\n  \n  for (let i = 0; i < count; i++) {\n    const areas = ['A', 'B', 'C'];\n    const area = areas[i % areas.length];\n    const number = 1000 + i;\n    \n    result.push({\n      id: area + number,\n      battery: Math.floor(20 + Math.random() * 80), // 保证至少有20%电量\n      distance: Math.floor(50 + Math.random() * 450), // 50-500米\n    });\n  }\n  \n  // 按距离排序\n  return result.sort((a, b) => a.distance - b.distance);\n};\n\n// 格式化距离\nconst formatDistance = (meters) => {\n  return meters < 1000 ? `${meters}米` : `${(meters / 1000).toFixed(1)}千米`;\n};\n\n// 格式化时间\nconst formatTime = (timestamp) => {\n  if (!timestamp) return '';\n  const date = new Date(timestamp);\n  return `${date.getHours()}:${String(date.getMinutes()).padStart(2, '0')}`;\n};\n\n// 格式化日期时间\nconst formatDateTime = (timestamp) => {\n  if (!timestamp) return '';\n  const date = new Date(timestamp);\n  const month = date.getMonth() + 1;\n  const day = date.getDate();\n  const hours = date.getHours();\n  const minutes = String(date.getMinutes()).padStart(2, '0');\n  return `${month}月${day}日 ${hours}:${minutes}`;\n};\n\n// 选择车辆\nconst selectScooter = (scooter) => {\n  selectedScooter.value = scooter;\n  activeStep.value = 2;\n};\n\n// 切换租赁模式\nconst switchRentalMode = (mode) => {\n  rentalMode.value = mode;\n};\n\n// 禁用过去的日期\nconst disablePastDates = (date) => {\n  const today = new Date();\n  today.setHours(0, 0, 0, 0);\n  return date.getTime() < today.getTime();\n};\n\n// 禁用过去的小时\nconst disablePastHours = () => {\n  const now = new Date();\n  const hours = [];\n  \n  if (reservationStartTime.value) {\n    const selectedDate = new Date(reservationStartTime.value);\n    const today = new Date();\n    \n    // 如果选择的是今天，禁用过去的小时\n    if (selectedDate.getDate() === today.getDate() && \n        selectedDate.getMonth() === today.getMonth() && \n        selectedDate.getFullYear() === today.getFullYear()) {\n      \n      for (let i = 0; i < now.getHours(); i++) {\n        hours.push(i);\n      }\n    }\n  }\n  \n  return hours;\n};\n\n// 禁用无效的结束日期\nconst disableInvalidEndDates = (date) => {\n  if (!reservationStartTime.value) return true;\n  \n  const startTime = new Date(reservationStartTime.value);\n  \n  // 结束时间不能早于开始时间\n  if (date.getTime() < startTime.getTime()) {\n    return true;\n  }\n  \n  // 结束时间不能超过开始时间7天\n  const maxDate = new Date(startTime);\n  maxDate.setDate(maxDate.getDate() + 7);\n  \n  return date.getTime() > maxDate.getTime();\n};\n\n// 更新预约\nconst updateReservation = () => {\n  if (reservationStartTime.value && reservationEndTime.value) {\n    // 验证时间\n    const startTime = new Date(reservationStartTime.value);\n    const endTime = new Date(reservationEndTime.value);\n    const now = new Date();\n    \n    // 开始时间至少要比当前时间晚一小时\n    const minStartTime = new Date(now);\n    minStartTime.setHours(minStartTime.getHours() + 1);\n    \n    if (startTime < minStartTime) {\n      ElMessage({\n        type: 'warning',\n        message: '预约时间必须至少提前1小时',\n        duration: 2000\n      });\n      reservationStartTime.value = '';\n      return;\n    }\n    \n    // 结束时间必须晚于开始时间\n    if (endTime <= startTime) {\n      ElMessage({\n        type: 'warning',\n        message: '结束时间必须晚于开始时间',\n        duration: 2000\n      });\n      reservationEndTime.value = '';\n      return;\n    }\n  }\n};\n\n// 计算预约价格\nconst calculateReservationPrice = () => {\n  if (!reservationStartTime.value || !reservationEndTime.value) {\n    return 0;\n  }\n  \n  const startTime = new Date(reservationStartTime.value);\n  const endTime = new Date(reservationEndTime.value);\n  \n  // 计算时间差（小时）\n  const diffHours = (endTime - startTime) / (1000 * 60 * 60);\n  \n  // 使用与自定义时长相同的计算逻辑\n  if (diffHours <= 1) {\n    return diffHours * 8;\n  } else if (diffHours <= 4) {\n    return diffHours * (25 / 4);\n  } else if (diffHours <= 24) {\n    return diffHours * (50 / 24);\n  } else {\n    const days = Math.floor(diffHours / 24);\n    const remainingHours = diffHours % 24;\n    \n    let price = days * 50; // 整天部分\n    \n    if (remainingHours > 0) {\n      if (remainingHours * (50 / 24) > 25) {\n        price += 50;\n      } else {\n        price += remainingHours * (50 / 24);\n      }\n    }\n    \n    return price;\n  }\n};\n\n// 格式化预约时间\nconst formatReservationTime = (timestamp) => {\n  if (!timestamp) return '';\n  \n  const date = new Date(timestamp);\n  const year = date.getFullYear();\n  const month = date.getMonth() + 1;\n  const day = date.getDate();\n  const hours = date.getHours();\n  const minutes = String(date.getMinutes()).padStart(2, '0');\n  \n  return `${year}年${month}月${day}日 ${hours}:${minutes}`;\n};\n\n// 显示取消预约确认对话框\nconst showCancelConfirm = () => {\n  ElMessageBox.confirm(\n    '确定要取消预约吗？预约费用将退回您的账户',\n    '取消预约',\n    {\n      confirmButtonText: '确定取消',\n      cancelButtonText: '返回',\n      type: 'warning',\n    }\n  )\n    .then(() => {\n      cancelReservation();\n    })\n    .catch(() => {\n      // 用户点击取消，不做任何操作\n    });\n};\n\n// 取消预约\nconst cancelReservation = async () => {\n  const loading = ElLoading.service({\n    lock: true,\n    text: '正在处理...',\n    background: 'rgba(255, 255, 255, 0.8)'\n  });\n  \n  try {\n    // 模拟取消处理\n    await new Promise(resolve => setTimeout(resolve, 1500));\n    \n    // 删除预约信息\n    localStorage.removeItem('currentRental');\n    \n    loading.close();\n    \n    ElMessage({\n      type: 'success',\n      message: '预约已成功取消，费用将在1-3个工作日内退回您的账户',\n      duration: 2500\n    });\n    \n    // 返回首页\n    router.push('/');\n    \n  } catch (error) {\n    console.error('取消预约失败:', error);\n    ElMessage({\n      type: 'error',\n      message: '取消预约失败，请重试',\n      duration: 1500\n    });\n  } finally {\n    loading.close();\n  }\n};\n\n// 修改确认租车函数\nconst confirmRent = async () => {\n  // 验证租车信息\n  if (!selectedScooter.value || isSubmitting.value) return;\n  \n  // 验证租赁方式\n  if (rentalMode.value === 'duration' && !selectedRentalDuration.value) {\n    ElMessage({\n      type: 'warning',\n      message: '请选择租赁时长',\n      duration: 1500\n    });\n    return;\n  }\n  \n  if (rentalMode.value === 'reservation' && (!reservationStartTime.value || !reservationEndTime.value)) {\n    ElMessage({\n      type: 'warning',\n      message: '请选择预约时间',\n      duration: 1500\n    });\n    return;\n  }\n  \n  isSubmitting.value = true;\n  \n  try {\n    // 显示加载中\n    const loading = ElLoading.service({\n      lock: true,\n      text: '正在处理...',\n      background: 'rgba(255, 255, 255, 0.8)'\n    });\n    \n    // 模拟支付处理\n    await new Promise(resolve => setTimeout(resolve, 1500));\n    \n    // 准备租车信息\n    let rentalData = {\n      scooterId: selectedScooter.value.id,\n      deposit: 99.00,\n      status: 'active'\n    };\n    \n    // 根据租赁方式处理\n    if (rentalMode.value === 'duration') {\n      // 计算结束时间\n      const startTime = new Date();\n      const endTime = new Date(startTime);\n      \n      // 根据选择的时长设置结束时间\n      if (selectedRentalDuration.value.startsWith('custom_')) {\n        // 处理自定义时长\n        const [hours, minutes] = selectedRentalDuration.value.replace('custom_', '').split(':');\n        endTime.setHours(endTime.getHours() + parseInt(hours));\n        endTime.setMinutes(endTime.getMinutes() + parseInt(minutes));\n      } else {\n        // 处理预设时长\n        switch(selectedRentalDuration.value) {\n          case '1':\n            endTime.setHours(endTime.getHours() + 1);\n            break;\n          case '4':\n            endTime.setHours(endTime.getHours() + 4);\n            break;\n          case '1d':\n            endTime.setDate(endTime.getDate() + 1);\n            break;\n          case '7d':\n            endTime.setDate(endTime.getDate() + 7);\n            break;\n        }\n      }\n      \n      // 设置时长租赁信息\n      rentalData = {\n        ...rentalData,\n        startTime: startTime,\n        endTime: endTime,\n        rentalDuration: selectedRentalDuration.value,\n        rentalPrice: getSelectedDurationPrice(),\n        totalPaid: getSelectedDurationPrice() + 99.00,\n        isReservation: false\n      };\n    } else {\n      // 预约模式\n      const reservationId = `RSV-${Date.now().toString().slice(-6)}`;\n      \n      // 设置预约信息\n      rentalData = {\n        ...rentalData,\n        reservationId: reservationId,\n        startTime: new Date(reservationStartTime.value),\n        endTime: new Date(reservationEndTime.value),\n        rentalPrice: calculateReservationPrice(),\n        totalPaid: calculateReservationPrice() + 99.00,\n        isReservation: true\n      };\n    }\n    \n    // 存储租车信息\n    rentalInfo.value = rentalData;\n    \n    // 保存到本地存储\n    localStorage.setItem('currentRental', JSON.stringify(rentalData));\n    \n    loading.close();\n    \n    // 进入成功页面\n    activeStep.value = 3;\n    \n  } catch (error) {\n    ElMessage({\n      type: 'error',\n      message: '支付失败，请重试',\n      duration: 1500\n    });\n    console.error('租车失败:', error);\n  } finally {\n    isSubmitting.value = false;\n  }\n};\n\n// 跳转到个人中心\nconst goToProfile = () => {\n  router.push('/profile');\n};\n\n// 跳转到首页\nconst goToHome = () => {\n  router.push('/');\n};\n\n// 跳转到扫码页面\nconst goToScanPage = () => {\n  router.push('/scan');\n};\n\n// 刷新车辆列表\nconst refreshScooters = () => {\n  fetchNearbyScooters();\n};\n\n// 电池相关样式\nconst getBatteryColor = (battery) => {\n  if (battery >= 60) return '#10B981';\n  if (battery >= 30) return '#F59E0B';\n  return '#EF4444';\n};\n\nconst getBatteryTextColor = (battery) => {\n  if (battery >= 60) return 'text-green-500';\n  if (battery >= 30) return 'text-yellow-500';\n  return 'text-red-500';\n};\n\n// 切换自定义时长模式\nconst toggleCustomDuration = () => {\n  isCustomDuration.value = true;\n  updateCustomDuration();\n};\n\n// 更新自定义时长\nconst updateCustomDuration = () => {\n  // 确保时间有效\n  if (customHours.value === 0 && customMinutes.value === 0) {\n    customHours.value = 1;\n  }\n  \n  // 更新自定义时长值\n  customDurationValue.value = `custom_${customHours.value}:${customMinutes.value}`;\n  selectedRentalDuration.value = customDurationValue.value;\n};\n\n// 计算自定义时长的价格\nconst calculateCustomPrice = () => {\n  // 转换为小时为单位的浮点数\n  const totalHours = customHours.value + (customMinutes.value / 60);\n  \n  // 基础费率：每小时8元\n  const hourlyRate = 8;\n  \n  // 应用阶梯定价\n  if (totalHours <= 1) {\n    // 1小时内，每小时8元\n    return totalHours * hourlyRate;\n  } else if (totalHours <= 4) {\n    // 1-4小时，适用4小时套餐的小时均价\n    return totalHours * (25 / 4);\n  } else if (totalHours <= 24) {\n    // 4-24小时，适用1天套餐的小时均价\n    return totalHours * (50 / 24);\n  } else {\n    // 超过24小时，按天计费加上剩余小时费用\n    const days = Math.floor(totalHours / 24);\n    const remainingHours = totalHours % 24;\n    \n    let price = days * 50; // 整天部分\n    \n    // 剩余小时部分\n    if (remainingHours > 0) {\n      // 如果剩余时间超过一天均价的一半，直接计为一天\n      if (remainingHours * (50 / 24) > 25) {\n        price += 50;\n      } else {\n        price += remainingHours * (50 / 24);\n      }\n    }\n    \n    return price;\n  }\n};\n\n// 选择租赁时长\nconst selectRentalDuration = (duration) => {\n  selectedRentalDuration.value = duration;\n  // 如果选择了预设选项，关闭自定义模式\n  if (duration !== customDurationValue.value) {\n    isCustomDuration.value = false;\n  }\n};\n\n// 获取选择的租赁时长标签\nconst getSelectedDurationLabel = () => {\n  // 处理自定义时长\n  if (selectedRentalDuration.value && selectedRentalDuration.value.startsWith('custom_')) {\n    const [hours, minutes] = selectedRentalDuration.value.replace('custom_', '').split(':');\n    if (minutes === '0') {\n      return `${hours}小时`;\n    }\n    return `${hours}小时${minutes}分钟`;\n  }\n  \n  const duration = selectedRentalDuration.value;\n  const option = rentalDurationOptions.find(opt => opt.value === duration);\n  return option ? option.label : '1小时'; // 默认返回1小时的标签\n};\n\n// 获取选择的租赁时长价格\nconst getSelectedDurationPrice = () => {\n  // 处理自定义时长\n  if (selectedRentalDuration.value && selectedRentalDuration.value.startsWith('custom_')) {\n    return calculateCustomPrice();\n  }\n  \n  const duration = selectedRentalDuration.value;\n  const option = rentalDurationOptions.find(opt => opt.value === duration);\n  return option ? option.price : 8.00; // 默认返回1小时的价格\n};\n\n// 初始化\nonMounted(() => {\n  fetchNearbyScooters();\n});\n</script>\n\n<style scoped>\n.rent-page {\n  max-width: 640px;\n  margin: 0 auto;\n}\n\n/* 步骤切换动画 */\n.w-10 {\n  transition: background-color 0.3s ease;\n}\n\n.h-px {\n  transition: background-color 0.3s ease;\n}\n\n.text-sm {\n  transition: color 0.3s ease;\n}\n\n/* 内容过渡动画 */\n.fade-enter-active,\n.fade-leave-active {\n  transition: opacity 0.3s ease;\n}\n\n.fade-enter-from,\n.fade-leave-to {\n  opacity: 0;\n}\n\n/* 自定义时长选择器淡入动画 */\n.animate-fadeIn {\n  animation: fadeIn 0.3s ease-in-out;\n}\n\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n    transform: translateY(-10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n</style> "],"names":[],"mappings":"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"}