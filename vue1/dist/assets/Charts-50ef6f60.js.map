{"version":3,"file":"Charts-50ef6f60.js","sources":["../../src/views/admin/Charts.vue"],"sourcesContent":["<template>\n  <div class=\"chart-test-page p-6\">\n    <h1 class=\"text-2xl font-bold mb-6\">图表测试页面</h1>\n    \n    <!-- 折线图 -->\n    <div class=\"bg-white rounded-lg shadow p-4 mb-6\">\n      <h2 class=\"text-lg font-bold mb-4\">收入趋势折线图</h2>\n      <div class=\"flex justify-end mb-4\">\n        <el-select v-model=\"linePeriod\" size=\"small\" @change=\"renderLineChart\">\n          <el-option label=\"最近7天\" value=\"7\" />\n          <el-option label=\"最近30天\" value=\"30\" />\n        </el-select>\n      </div>\n      <div ref=\"lineChartRef\" style=\"width: 100%; height: 400px;\"></div>\n    </div>\n    \n    <!-- 饼图 -->\n    <div class=\"bg-white rounded-lg shadow p-4 mb-6\">\n      <h2 class=\"text-lg font-bold mb-4\">收入来源分布</h2>\n      <div ref=\"pieChartRef\" style=\"width: 100%; height: 400px;\"></div>\n    </div>\n    \n    <!-- 柱状图 -->\n    <div class=\"bg-white rounded-lg shadow p-4 mb-6\">\n      <h2 class=\"text-lg font-bold mb-4\">各区域车辆使用量</h2>\n      <div ref=\"barChartRef\" style=\"width: 100%; height: 400px;\"></div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted, onUnmounted } from 'vue';\nimport * as echarts from 'echarts';\n\n// 图表引用\nconst lineChartRef = ref(null);\nconst pieChartRef = ref(null);\nconst barChartRef = ref(null);\n\n// 图表实例\nlet lineChart = null;\nlet pieChart = null;\nlet barChart = null;\n\n// 数据配置\nconst linePeriod = ref('7');\n\n// =================== 折线图 ===================\nfunction renderLineChart() {\n  console.log('正在渲染折线图...');\n  if (!lineChartRef.value) return;\n  \n  // 销毁旧图表\n  if (lineChart) {\n    lineChart.dispose();\n  }\n  \n  // 创建新图表\n  lineChart = echarts.init(lineChartRef.value);\n  \n  // 生成数据\n  const days = parseInt(linePeriod.value);\n  const dates = [];\n  const totalData = [];\n  const rentalData = [];\n  const memberData = [];\n  \n  const today = new Date();\n  for (let i = days - 1; i >= 0; i--) {\n    const date = new Date();\n    date.setDate(today.getDate() - i);\n    dates.push(`${date.getMonth() + 1}/${date.getDate()}`);\n    \n    // 生成随机数据\n    const total = Math.floor(Math.random() * 1000) + 500;\n    const rental = Math.floor(total * 0.7);\n    const member = total - rental;\n    \n    totalData.push(total);\n    rentalData.push(rental);\n    memberData.push(member);\n  }\n  \n  // 设置选项\n  const option = {\n    title: {\n      text: '每日收入趋势',\n      left: 'center'\n    },\n    tooltip: {\n      trigger: 'axis'\n    },\n    legend: {\n      data: ['总收入', '租赁收入', '会员收入'],\n      top: 30\n    },\n    grid: {\n      left: '3%',\n      right: '4%',\n      bottom: '3%',\n      top: 80,\n      containLabel: true\n    },\n    xAxis: {\n      type: 'category',\n      data: dates\n    },\n    yAxis: {\n      type: 'value',\n      axisLabel: {\n        formatter: '¥{value}'\n      }\n    },\n    series: [\n      {\n        name: '总收入',\n        type: 'line',\n        data: totalData,\n        smooth: true,\n        lineStyle: {\n          width: 3\n        },\n        itemStyle: {\n          color: '#409EFF'\n        }\n      },\n      {\n        name: '租赁收入',\n        type: 'line',\n        data: rentalData,\n        smooth: true,\n        itemStyle: {\n          color: '#67C23A'\n        }\n      },\n      {\n        name: '会员收入',\n        type: 'line',\n        data: memberData,\n        smooth: true,\n        itemStyle: {\n          color: '#E6A23C'\n        }\n      }\n    ]\n  };\n  \n  // 设置图表\n  lineChart.setOption(option);\n  console.log('折线图渲染完成');\n}\n\n// =================== 饼图 ===================\nfunction renderPieChart() {\n  console.log('正在渲染饼图...');\n  if (!pieChartRef.value) return;\n  \n  // 销毁旧图表\n  if (pieChart) {\n    pieChart.dispose();\n  }\n  \n  // 创建新图表\n  pieChart = echarts.init(pieChartRef.value);\n  \n  // 设置选项\n  const option = {\n    title: {\n      text: '收入来源分布',\n      left: 'center'\n    },\n    tooltip: {\n      trigger: 'item',\n      formatter: '{a} <br/>{b}: {c} ({d}%)'\n    },\n    legend: {\n      orient: 'horizontal',\n      top: 40,\n      data: ['单次租赁', '会员订阅', '长时租赁', '优惠活动', '其他']\n    },\n    series: [\n      {\n        name: '收入来源',\n        type: 'pie',\n        radius: ['40%', '70%'],\n        avoidLabelOverlap: false,\n        itemStyle: {\n          borderRadius: 10,\n          borderColor: '#fff',\n          borderWidth: 2\n        },\n        label: {\n          show: false,\n          position: 'center'\n        },\n        emphasis: {\n          label: {\n            show: true,\n            fontSize: 18,\n            fontWeight: 'bold'\n          }\n        },\n        labelLine: {\n          show: false\n        },\n        data: [\n          { value: 1048, name: '单次租赁' },\n          { value: 735, name: '会员订阅' },\n          { value: 580, name: '长时租赁' },\n          { value: 484, name: '优惠活动' },\n          { value: 300, name: '其他' }\n        ]\n      }\n    ]\n  };\n  \n  // 设置图表\n  pieChart.setOption(option);\n  console.log('饼图渲染完成');\n}\n\n// =================== 柱状图 ===================\nfunction renderBarChart() {\n  console.log('正在渲染柱状图...');\n  if (!barChartRef.value) return;\n  \n  // 销毁旧图表\n  if (barChart) {\n    barChart.dispose();\n  }\n  \n  // 创建新图表\n  barChart = echarts.init(barChartRef.value);\n  \n  // 设置选项\n  const option = {\n    title: {\n      text: '各区域车辆使用量',\n      left: 'center'\n    },\n    tooltip: {\n      trigger: 'axis',\n      axisPointer: {\n        type: 'shadow'\n      }\n    },\n    legend: {\n      top: 40,\n      data: ['工作日', '周末']\n    },\n    grid: {\n      left: '3%',\n      right: '4%',\n      bottom: '3%',\n      top: 80,\n      containLabel: true\n    },\n    xAxis: {\n      type: 'category',\n      data: ['市中心', '大学城', '科技园', '商业区', '居民区']\n    },\n    yAxis: {\n      type: 'value',\n      name: '使用次数',\n      axisLabel: {\n        formatter: '{value} 次'\n      }\n    },\n    series: [\n      {\n        name: '工作日',\n        type: 'bar',\n        data: [320, 302, 301, 334, 390],\n        itemStyle: {\n          color: '#409EFF'\n        }\n      },\n      {\n        name: '周末',\n        type: 'bar',\n        data: [120, 132, 101, 134, 90],\n        itemStyle: {\n          color: '#FF9F43'\n        }\n      }\n    ]\n  };\n  \n  // 设置图表\n  barChart.setOption(option);\n  console.log('柱状图渲染完成');\n}\n\n// 处理窗口大小变化\nfunction handleResize() {\n  console.log('处理窗口大小变化');\n  if (lineChart) lineChart.resize();\n  if (pieChart) pieChart.resize();\n  if (barChart) barChart.resize();\n}\n\n// 组件挂载时初始化\nonMounted(() => {\n  console.log('Charts组件已挂载');\n  \n  // 给DOM一点渲染时间\n  setTimeout(() => {\n    renderLineChart();\n    renderPieChart();\n    renderBarChart();\n  }, 300);\n  \n  // 监听窗口大小变化\n  window.addEventListener('resize', handleResize);\n});\n\n// 组件卸载时清理资源\nonUnmounted(() => {\n  console.log('Charts组件已卸载');\n  \n  // 销毁图表实例\n  if (lineChart) lineChart.dispose();\n  if (pieChart) pieChart.dispose();\n  if (barChart) barChart.dispose();\n  \n  // 移除事件监听\n  window.removeEventListener('resize', handleResize);\n});\n</script>\n\n<style scoped>\n.chart-test-page {\n  max-width: 1200px;\n  margin: 0 auto;\n}\n</style> "],"names":["echarts.init"],"mappings":"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"}