{"version":3,"file":"Users-6700fbfd.js","sources":["../../src/views/admin/Users.vue"],"sourcesContent":["<template>\n  <div class=\"p-6\">\n    <div class=\"mb-6\">\n      <h1 class=\"text-2xl font-bold mb-2\">用户管理</h1>\n      <p class=\"text-gray-600\">管理所有用户账户和权限</p>\n    </div>\n    \n    <!-- 标签页切换 -->\n    <el-tabs v-model=\"activeTab\" class=\"mb-6\">\n      <el-tab-pane label=\"用户列表\" name=\"userList\">\n        <!-- 原有的用户列表功能 -->\n        <div class=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n          <!-- 用户列表内容 -->\n          <div class=\"flex justify-between items-center mb-6\">\n            <h2 class=\"text-lg font-semibold\">系统用户</h2>\n            <el-button type=\"primary\" @click=\"handleAddUser\">添加用户</el-button>\n    </div>\n        </div>\n      </el-tab-pane>\n      \n      <el-tab-pane label=\"用户数据管理\" name=\"userData\">\n        <!-- 用户表数据管理 -->\n        <div class=\"bg-white p-6 rounded-lg shadow-md\">\n          <TableManager \n            tableName=\"users\" \n            title=\"用户数据表\" \n            :columns=\"userColumns\"\n            :formFields=\"userFormFields\"\n            :filterOptions=\"userFilterOptions\"\n          />\n      </div>\n      </el-tab-pane>\n\n      <el-tab-pane label=\"用户角色管理\" name=\"userRoles\">\n        <!-- 用户角色数据管理 -->\n        <div class=\"bg-white p-6 rounded-lg shadow-md\">\n          <TableManager \n            tableName=\"user_roles\" \n            title=\"用户角色表\" \n            :columns=\"roleColumns\"\n            :formFields=\"roleFormFields\"\n        />\n      </div>\n      </el-tab-pane>\n\n      <el-tab-pane label=\"验证信息\" name=\"userVerification\">\n        <!-- 用户验证数据管理 -->\n        <div class=\"bg-white p-6 rounded-lg shadow-md\">\n          <TableManager \n            tableName=\"verification_tokens\" \n            title=\"验证令牌记录\" \n            :columns=\"verificationColumns\"\n            :formFields=\"verificationFormFields\"\n            :filterOptions=\"verificationFilterOptions\"\n          />\n          </div>\n      </el-tab-pane>\n    </el-tabs>\n  </div>\n</template>\n\n<script setup>\nimport { ref } from 'vue';\nimport TableManager from '@/components/admin/TableManager.vue';\nimport { ElMessage } from 'element-plus';\n\n// 活动标签页\nconst activeTab = ref('userList');\n\n// 用户相关方法\nconst handleAddUser = () => {\n  ElMessage.info('添加用户功能正在开发中');\n};\n\n// 用户表列定义\nconst userColumns = [\n  { prop: 'id', label: 'ID', sortable: true, width: '80' },\n  { prop: 'username', label: '用户名', sortable: true, searchable: true },\n  { prop: 'email', label: '邮箱', sortable: true, searchable: true },\n  { prop: 'role', label: '角色', sortable: true },\n  { prop: 'status', label: '状态', sortable: true },\n  { prop: 'createdAt', label: '创建时间', sortable: true, type: 'datetime' },\n  { prop: 'lastLogin', label: '最后登录', sortable: true, type: 'datetime' }\n];\n\n// 用户表单字段\nconst userFormFields = [\n  { \n    prop: 'username', \n    label: '用户名', \n    type: 'text',\n    rules: [{ required: true, message: '请输入用户名', trigger: 'blur' }]\n  },\n  { \n    prop: 'email', \n    label: '邮箱', \n    type: 'text',\n    rules: [\n      { required: true, message: '请输入邮箱', trigger: 'blur' },\n      { type: 'email', message: '请输入有效的邮箱地址', trigger: 'blur' }\n    ]\n  },\n  { \n    prop: 'password', \n    label: '密码', \n    type: 'text',\n    placeholder: '编辑时留空表示不修改'\n  },\n  { \n    prop: 'role', \n    label: '角色', \n    type: 'select',\n    options: [\n      { value: 'user', label: '普通用户' },\n      { value: 'vip', label: 'VIP用户' },\n      { value: 'customer_service', label: '客服' },\n      { value: 'admin', label: '管理员' },\n      { value: 'super_admin', label: '超级管理员' }\n    ],\n    rules: [{ required: true, message: '请选择角色', trigger: 'change' }]\n  },\n  { \n    prop: 'status', \n    label: '状态', \n    type: 'select',\n    options: [\n      { value: 'active', label: '活跃' },\n      { value: 'inactive', label: '不活跃' },\n      { value: 'banned', label: '封禁' },\n      { value: 'pending', label: '待验证' }\n    ],\n    rules: [{ required: true, message: '请选择状态', trigger: 'change' }]\n  },\n  { \n    prop: 'emailVerified', \n    label: '邮箱已验证', \n    type: 'boolean'\n  }\n];\n\n// 用户表过滤选项\nconst userFilterOptions = [\n  { label: '角色: 普通用户', value: 'role:user' },\n  { label: '角色: VIP', value: 'role:vip' },\n  { label: '角色: 客服', value: 'role:customer_service' },\n  { label: '角色: 管理员', value: 'role:admin' },\n  { label: '状态: 活跃', value: 'status:active' },\n  { label: '状态: 不活跃', value: 'status:inactive' },\n  { label: '状态: 封禁', value: 'status:banned' }\n];\n\n// 角色表列定义\nconst roleColumns = [\n  { prop: 'id', label: 'ID', sortable: true, width: '80' },\n  { prop: 'name', label: '角色名称', sortable: true, searchable: true },\n  { prop: 'description', label: '描述', searchable: true },\n  { prop: 'permissions', label: '权限' },\n  { prop: 'createdAt', label: '创建时间', sortable: true, type: 'datetime' }\n];\n\n// 角色表单字段\nconst roleFormFields = [\n  { \n    prop: 'name', \n    label: '角色名称', \n    type: 'text',\n    rules: [{ required: true, message: '请输入角色名称', trigger: 'blur' }]\n  },\n  { \n    prop: 'description', \n    label: '描述', \n    type: 'text'\n  },\n  { \n    prop: 'permissions', \n    label: '权限', \n    type: 'text',\n    placeholder: '用逗号分隔的权限列表'\n  }\n];\n\n// 验证表列定义\nconst verificationColumns = [\n  { prop: 'id', label: 'ID', sortable: true, width: '80' },\n  { prop: 'userId', label: '用户ID', sortable: true },\n  { prop: 'token', label: '令牌', width: '120' },\n  { prop: 'type', label: '类型', sortable: true },\n  { prop: 'expiresAt', label: '过期时间', sortable: true, type: 'datetime' },\n  { prop: 'createdAt', label: '创建时间', sortable: true, type: 'datetime' },\n  { prop: 'usedAt', label: '使用时间', sortable: true, type: 'datetime' }\n];\n\n// 验证表单字段\nconst verificationFormFields = [\n  { \n    prop: 'userId', \n    label: '用户ID', \n    type: 'text',\n    rules: [{ required: true, message: '请输入用户ID', trigger: 'blur' }]\n  },\n  { \n    prop: 'token', \n    label: '令牌', \n    type: 'text',\n    rules: [{ required: true, message: '请输入令牌', trigger: 'blur' }]\n  },\n  { \n    prop: 'type', \n    label: '类型', \n    type: 'select',\n    options: [\n      { value: 'email', label: '邮箱验证' },\n      { value: 'password', label: '密码重置' },\n      { value: 'phone', label: '手机验证' }\n    ],\n    rules: [{ required: true, message: '请选择类型', trigger: 'change' }]\n  },\n  { \n    prop: 'expiresAt', \n    label: '过期时间', \n    type: 'datetime',\n    rules: [{ required: true, message: '请选择过期时间', trigger: 'change' }]\n  }\n];\n\n// 验证表过滤选项\nconst verificationFilterOptions = [\n  { label: '类型: 邮箱验证', value: 'type:email' },\n  { label: '类型: 密码重置', value: 'type:password' },\n  { label: '类型: 手机验证', value: 'type:phone' },\n  { label: '状态: 已使用', value: 'usedAt:not null' },\n  { label: '状态: 未使用', value: 'usedAt:null' }\n];\n</script>\n\n<style scoped>\n.admin-users {\n  min-height: calc(100vh - 64px);\n}\n\n.success-dialog-content {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 20px 0;\n}\n\n.success-icon {\n  margin-bottom: 20px;\n}\n\n.success-message {\n  font-size: 16px;\n  text-align: center;\n  white-space: pre-line;\n  line-height: 1.6;\n}\n\n/* 强调必填字段标记 */\n:deep(.el-form-item.is-required) .el-form-item__label::before {\n  color: #f56c6c;\n  font-weight: bold;\n}\n\n/* 强调错误提示信息 */\n:deep(.el-form-item.is-error) .el-form-item__error {\n  font-size: 14px;\n  margin-top: 4px;\n  color: #f56c6c;\n  font-weight: 500;\n  background-color: #feeeee;\n  padding: 2px 8px;\n  border-radius: 4px;\n}\n\n/* 验证码倒计时文字效果 */\n:deep(.countdown-text) {\n  font-size: 12px;\n  color: #909399;\n}\n</style> \n"],"names":[],"mappings":"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"}