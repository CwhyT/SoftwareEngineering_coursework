{"version":3,"file":"Scan-99583fde.js","sources":["../../src/views/user/Scan.vue"],"sourcesContent":["<template>\n  <div class=\"scan-container\">\n    <h1 class=\"text-2xl font-bold text-center mb-6\">扫码租车</h1>\n    <div class=\"scan-box\">\n      <div class=\"camera-view\">\n        <el-icon class=\"scan-icon\"><Camera /></el-icon>\n        <p class=\"text-gray-500 mt-3\">请将二维码对准扫描框</p>\n      </div>\n      <el-button type=\"primary\" class=\"scan-btn\" @click=\"handleScan\">开始扫描</el-button>\n      \n      <div class=\"mt-4 text-center\">\n        <el-button type=\"text\" @click=\"router.push('/rent')\">\n          返回车辆列表\n        </el-button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { ElMessage, ElMessageBox } from 'element-plus';\nimport { Camera } from '@element-plus/icons-vue';\n\nconst router = useRouter();\nconst isScanActive = ref(false);\n\n// 模拟扫描功能\nconst handleScan = async () => {\n  if (isScanActive.value) return;\n  \n  isScanActive.value = true;\n  ElMessage.info({\n    message: '正在扫描...',\n    duration: 1500\n  });\n  \n  // 模拟扫描延迟\n  await new Promise(resolve => setTimeout(resolve, 2000));\n  \n  // 模拟找到车辆\n  const scannedScooterId = 'A' + Math.floor(1000 + Math.random() * 9000);\n  \n  ElMessageBox.confirm(\n    `已扫描到车辆: ${scannedScooterId}，电量: 85%，确认租用？`,\n    '扫描成功',\n    {\n      confirmButtonText: '确认租用',\n      cancelButtonText: '取消',\n      type: 'success'\n    }\n  ).then(() => {\n    ElMessage({\n      type: 'success',\n      message: '租用成功，正在解锁车辆...',\n      duration: 1500\n    });\n    setTimeout(() => {\n      router.push('/payment');\n    }, 1000);\n  }).catch(() => {\n    ElMessage({\n      type: 'info',\n      message: '已取消租用',\n      duration: 1500\n    });\n  }).finally(() => {\n    isScanActive.value = false;\n  });\n};\n\nonMounted(() => {\n  console.log('扫码页面已加载');\n  \n  // 请求相机权限的提示\n  ElMessage({\n    message: '请允许使用相机权限以扫描车辆二维码',\n    type: 'info',\n    duration: 1500\n  });\n});\n</script>\n\n<style scoped>\n.scan-container {\n  padding: 20px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  min-height: 100vh;\n  background-color: #f8f9fa;\n}\n\n.scan-box {\n  margin-top: 30px;\n  width: 300px;\n  height: 380px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  border: 1px solid #dcdfe6;\n  border-radius: 12px;\n  background: #ffffff;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);\n  padding: 20px;\n}\n\n.camera-view {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 250px;\n  height: 250px;\n  border: 2px dashed #409eff;\n  border-radius: 8px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  position: relative;\n  overflow: hidden;\n}\n\n.camera-view::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 2px;\n  background: #409eff;\n  animation: scan 2s linear infinite;\n}\n\n@keyframes scan {\n  0% { top: 0; }\n  50% { top: 100%; }\n  51% { top: 100%; }\n  100% { top: 0; }\n}\n\n.scan-icon {\n  font-size: 64px;\n  color: #409eff;\n  margin-bottom: 16px;\n}\n\n.scan-btn {\n  margin-top: 24px;\n  width: 200px;\n}\n</style>\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyBA,UAAM,SAAS,UAAS;AACxB,UAAM,eAAe,IAAI,KAAK;AAG9B,UAAM,aAAa,MAAY;AAC7B,UAAI,aAAa;AAAO;AAExB,mBAAa,QAAQ;AACrB,gBAAU,KAAK;AAAA,QACb,SAAS;AAAA,QACT,UAAU;AAAA,MACd,CAAG;AAGD,YAAM,IAAI,QAAQ,aAAW,WAAW,SAAS,GAAI,CAAC;AAGtD,YAAM,mBAAmB,MAAM,KAAK,MAAM,MAAO,KAAK,WAAW,GAAI;AAErE,mBAAa;AAAA,QACX,WAAW,gBAAgB;AAAA,QAC3B;AAAA,QACA;AAAA,UACE,mBAAmB;AAAA,UACnB,kBAAkB;AAAA,UAClB,MAAM;AAAA,QACR;AAAA,MACD,EAAC,KAAK,MAAM;AACX,kBAAU;AAAA,UACR,MAAM;AAAA,UACN,SAAS;AAAA,UACT,UAAU;AAAA,QAChB,CAAK;AACD,mBAAW,MAAM;AACf,iBAAO,KAAK,UAAU;AAAA,QACvB,GAAE,GAAI;AAAA,MACX,CAAG,EAAE,MAAM,MAAM;AACb,kBAAU;AAAA,UACR,MAAM;AAAA,UACN,SAAS;AAAA,UACT,UAAU;AAAA,QAChB,CAAK;AAAA,MACL,CAAG,EAAE,QAAQ,MAAM;AACf,qBAAa,QAAQ;AAAA,MACzB,CAAG;AAAA,IACH;AAEA,cAAU,MAAM;AACd,cAAQ,IAAI,SAAS;AAGrB,gBAAU;AAAA,QACR,SAAS;AAAA,QACT,MAAM;AAAA,QACN,UAAU;AAAA,MACd,CAAG;AAAA,IACH,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}