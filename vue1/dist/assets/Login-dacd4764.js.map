{"version":3,"file":"Login-dacd4764.js","sources":["../../src/views/auth/Login.vue"],"sourcesContent":["<template>\n  <div class=\"login-page min-h-screen bg-gray-100 py-12 px-4 sm:px-6 lg:px-8 flex items-center justify-center\">\n    <div class=\"max-w-md w-full space-y-8 bg-white p-8 rounded-lg shadow-md\">\n      <div class=\"text-center\">\n        <h2 class=\"mt-2 text-3xl font-extrabold text-gray-900\">\n          登录账户\n        </h2>\n        <p class=\"mt-2 text-sm text-gray-600\">\n          电动滑板车租赁系统\n        </p>\n      </div>\n      \n      <el-form\n        ref=\"loginFormRef\"\n        :model=\"loginForm\"\n        :rules=\"loginRules\"\n        @submit.prevent=\"handleLogin\"\n        class=\"mt-8 space-y-6\"\n      >\n        <div class=\"mb-6\">\n          <el-form-item prop=\"username\">\n            <el-input\n              v-model=\"loginForm.username\"\n              placeholder=\"请输入您的用户名\"\n              :prefix-icon=\"User\"\n              autocomplete=\"username\"\n              class=\"form-input\"\n            />\n            <div class=\"text-xs text-gray-500 mt-1 ml-1\">用户名长度在3-20个字符之间</div>\n          </el-form-item>\n          \n          <el-form-item prop=\"password\">\n            <el-input\n              v-model=\"loginForm.password\"\n              type=\"password\"\n              placeholder=\"请输入您的密码\"\n              :prefix-icon=\"Lock\"\n              autocomplete=\"current-password\"\n              class=\"form-input\"\n              show-password\n            />\n            <div class=\"text-xs text-gray-500 mt-1 ml-1\">密码长度在6-20个字符之间</div>\n          </el-form-item>\n        </div>\n        \n        <div class=\"flex justify-between items-center mt-2\">\n          <el-checkbox v-model=\"loginForm.remember\">记住我</el-checkbox>\n          <router-link to=\"/auth/forgot-password\" class=\"text-blue-500 text-sm\">忘记密码?</router-link>\n        </div>\n        \n        <el-button type=\"primary\" native-type=\"submit\" class=\"w-full mt-4\" :loading=\"loading\">登录</el-button>\n        \n        <div class=\"mt-4 text-center\">\n          <router-link to=\"/auth/register\" class=\"text-blue-500\">没有账号? 立即注册</router-link>\n        </div>\n        \n        <div v-if=\"errorMessage\" class=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded\">\n          {{ errorMessage }}\n        </div>\n      </el-form>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, reactive, computed } from 'vue';\nimport { useRouter, useRoute } from 'vue-router';\nimport { useUserStore } from '@/stores/user';\nimport { User, Lock } from '@element-plus/icons-vue';\nimport { ElMessage } from 'element-plus';\nimport { userApi } from '@/api/user';\n\nconst router = useRouter();\nconst route = useRoute();\nconst userStore = useUserStore();\n\n// 表单数据\nconst loginForm = reactive({\n  username: '',\n  password: ''\n});\n\n// 表单验证规则\nconst loginRules = {\n  username: [\n    { required: true, message: '请输入用户名', trigger: 'blur' },\n    { min: 3, max: 20, message: '长度在 3 到 20 个字符', trigger: 'blur' }\n  ],\n  password: [\n    { required: true, message: '请输入密码', trigger: 'blur' },\n    { min: 6, max: 20, message: '长度在 6 到 20 个字符', trigger: 'blur' }\n  ]\n};\n\n// 状态\nconst loading = ref(false);\nconst rememberMe = ref(false);\nconst errorMessage = ref('');\nconst loginFormRef = ref(null);\n\n// 是否为开发环境\nconst isDev = computed(() => import.meta.env.DEV);\n\nconst handleLogin = async () => {\n  // 表单验证\n  if (!loginForm.username || !loginForm.password) {\n    ElMessage.warning('请输入用户名和密码');\n    return;\n  }\n\n  // 设置加载状态\n  loading.value = true;\n  errorMessage.value = '';\n\n  try {\n    const credentials = {\n      username: loginForm.username,\n      password: loginForm.password\n    };\n    \n    const result = await userStore.login(credentials);\n    \n    if (result.success) {\n      // 显示成功消息\n      ElMessage.success('登录成功');\n      \n      // 如果是从其他页面重定向来的，登录后返回那个页面\n      const redirectPath = route.query.redirect || \n                          (userStore.isAdmin ? '/admin' : '/');\n                          \n        router.push(redirectPath);\n    } else {\n      // 登录失败\n      errorMessage.value = result.message || '登录失败，请检查用户名和密码';\n    }\n  } catch (error) {\n    console.error('登录错误:', error);\n    errorMessage.value = '登录过程中发生错误';\n  } finally {\n    loading.value = false;\n  }\n};\n</script>\n\n<style scoped>\n.form-input :deep(.el-input__wrapper) {\n  border-radius: 0.375rem;\n  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);\n}\n\n.form-input :deep(.el-input__wrapper.is-focus) {\n  box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.3), 0 1px 2px 0 rgba(0, 0, 0, 0.05);\n}\n\n.el-form-item {\n  margin-bottom: 1rem;\n}\n\n:deep(.el-button) {\n  font-size: 16px;\n  padding-top: 10px;\n  padding-bottom: 10px;\n  background-color: var(--color-primary);\n  opacity: 1;\n  border: none;\n}\n\n:deep(.el-button:hover) {\n  background-color: #2563eb;\n  opacity: 1;\n}\n</style>\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwEA,UAAM,SAAS,UAAS;AACxB,UAAM,QAAQ,SAAQ;AACtB,UAAM,YAAY,aAAY;AAG9B,UAAM,YAAY,SAAS;AAAA,MACzB,UAAU;AAAA,MACV,UAAU;AAAA,IACZ,CAAC;AAGD,UAAM,aAAa;AAAA,MACjB,UAAU;AAAA,QACR,EAAE,UAAU,MAAM,SAAS,UAAU,SAAS,OAAQ;AAAA,QACtD,EAAE,KAAK,GAAG,KAAK,IAAI,SAAS,kBAAkB,SAAS,OAAO;AAAA,MAC/D;AAAA,MACD,UAAU;AAAA,QACR,EAAE,UAAU,MAAM,SAAS,SAAS,SAAS,OAAQ;AAAA,QACrD,EAAE,KAAK,GAAG,KAAK,IAAI,SAAS,kBAAkB,SAAS,OAAO;AAAA,MAChE;AAAA,IACF;AAGA,UAAM,UAAU,IAAI,KAAK;AACN,QAAI,KAAK;AAC5B,UAAM,eAAe,IAAI,EAAE;AAC3B,UAAM,eAAe,IAAI,IAAI;AAGf,aAAS,MAAM,KAAmB;AAEhD,UAAM,cAAc,MAAY;AAE9B,UAAI,CAAC,UAAU,YAAY,CAAC,UAAU,UAAU;AAC9C,kBAAU,QAAQ,WAAW;AAC7B;AAAA,MACF;AAGA,cAAQ,QAAQ;AAChB,mBAAa,QAAQ;AAErB,UAAI;AACF,cAAM,cAAc;AAAA,UAClB,UAAU,UAAU;AAAA,UACpB,UAAU,UAAU;AAAA,QAC1B;AAEI,cAAM,SAAS,MAAM,UAAU,MAAM,WAAW;AAEhD,YAAI,OAAO,SAAS;AAElB,oBAAU,QAAQ,MAAM;AAGxB,gBAAM,eAAe,MAAM,MAAM,aACZ,UAAU,UAAU,WAAW;AAElD,iBAAO,KAAK,YAAY;AAAA,QAChC,OAAW;AAEL,uBAAa,QAAQ,OAAO,WAAW;AAAA,QACzC;AAAA,MACD,SAAQ,OAAO;AACd,gBAAQ,MAAM,SAAS,KAAK;AAC5B,qBAAa,QAAQ;AAAA,MACzB,UAAY;AACR,gBAAQ,QAAQ;AAAA,MAClB;AAAA,IACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}